import{r as d,a as at,R as Tt}from"./react-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var ot={exports:{}},Ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rt=d,Bt=Symbol.for("react.element"),Wt=Symbol.for("react.fragment"),zt=Object.prototype.hasOwnProperty,Ot=Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gt={key:!0,ref:!0,__self:!0,__source:!0};function lt(t,s,r){var i,n={},o=null,l=null;r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(l=s.ref);for(i in s)zt.call(s,i)&&!Gt.hasOwnProperty(i)&&(n[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)n[i]===void 0&&(n[i]=s[i]);return{$$typeof:Bt,type:t,key:o,ref:l,props:n,_owner:Ot.current}}Ae.Fragment=Wt;Ae.jsx=lt;Ae.jsxs=lt;ot.exports=Ae;var e=ot.exports,Te={},He=at;Te.createRoot=He.createRoot,Te.hydrateRoot=He.hydrateRoot;const oe={appTitle:"Senior Project Jury Portal",courseName:"EE 491 / EE 492 â€” Senior Project",department:"Electrical & Electronics Engineering",university:"TED University",scriptUrl:"https://script.google.com/macros/s/AKfycbyQK792Cd5-3X7mpqd-LwOuFlvB8MbreTXDqY9KLgTTl7hw9GBCzNtZ3C1aS89R9lARCA/exec",apiSecret:"1feadbeca9e48b24f89ceaef7fa52e7a6d44f90e6167f549",showStudents:!0},W=[{id:1,name:"Group 1",desc:"GÃ¶ksiper Hava Savunma Sistemi",students:["Mustafa Yusuf Ãœnal","AyÃ§a Naz DedeoÄŸlu","Onur Mesci","Ã‡aÄŸan ErdoÄŸan"]},{id:2,name:"Group 2",desc:"Radome and Radar-Absorbing Material Electromagnetic Design Software (REMDET)",students:["Niyazi Atilla Ã–zer","Bertan Ãœnver","Ada TatlÄ±","Nesibe AydÄ±n"]},{id:3,name:"Group 3",desc:"Smart Crosswalk",students:["Sami Eren GermeÃ§"]},{id:4,name:"Group 4",desc:"Radar Cross Section (RCS) Analysis â€” Supporting Multi-Purpose Ray Tracing Algorithm",students:["Ahmet Melih Yavuz","Yasemin Erciyas"]},{id:5,name:"Group 5",desc:"Monitoring Pilots' Health Status and Cognitive Abilities During Flight",students:["Aysel Mine Ã‡aylan","Selimhan Kaynar","Abdulkadir SazlÄ±","Alp Efe Ä°pek"]},{id:6,name:"Group 6",desc:"AKKE â€” Smart Command and Control Glove",students:["Åževval KurtulmuÅŸ","Abdullah Esin","Berk Ã‡akmak","Ã–mer Efe Dikici"]}],V=[{id:"technical",label:"Technical Content",shortLabel:"Technical",color:"#F59E0B",mudek:["1.2","2","3.1","3.2"],max:30,rubric:[{range:"27â€“30",level:"Excellent",min:27,max:30,desc:"Problem is clearly defined with strong motivation. Design decisions are well-justified with engineering depth. Originality and mastery of relevant tools or methods are evident."},{range:"21â€“26",level:"Good",min:21,max:26,desc:"Design is mostly clear and technically justified. Engineering decisions are largely supported."},{range:"13â€“20",level:"Developing",min:13,max:20,desc:"Problem is stated but motivation or technical justification is insufficient."},{range:"0â€“12",level:"Insufficient",min:0,max:12,desc:"Vague problem definition and unjustified decisions. Superficial technical content."}]},{id:"design",label:"Written Communication",shortLabel:"Written",color:"#22C55E",mudek:["9.2"],max:30,rubric:[{range:"27â€“30",level:"Excellent",min:27,max:30,desc:"Poster layout is intuitive with clear information flow. Visuals are fully labelled and high quality. Technical content is presented in a way that is accessible to both technical and non-technical readers."},{range:"21â€“26",level:"Good",min:21,max:26,desc:"Layout is mostly logical. Visuals are readable with minor gaps. Technical content is largely clear with small areas for improvement."},{range:"13â€“20",level:"Developing",min:13,max:20,desc:"Occasional gaps in information flow. Some visuals are missing labels or captions. Technical content is only partially communicated."},{range:"0â€“12",level:"Insufficient",min:0,max:12,desc:"Confusing layout. Low-quality or unlabelled visuals. Technical content is unclear or missing."}]},{id:"delivery",label:"Oral Communication",shortLabel:"Oral",color:"#3B82F6",mudek:["9.1"],max:30,rubric:[{range:"27â€“30",level:"Excellent",min:27,max:30,desc:"Presentation is consciously adapted for both technical and non-technical jury members. Q&A responses are accurate, clear, and audience-appropriate."},{range:"21â€“26",level:"Good",min:21,max:26,desc:"Presentation is mostly clear and well-paced. Most questions answered correctly. Audience adaptation is generally evident."},{range:"13â€“20",level:"Developing",min:13,max:20,desc:"Understandable but inconsistent. Limited audience adaptation. Time management or Q&A depth needs improvement."},{range:"0â€“12",level:"Insufficient",min:0,max:12,desc:"Unclear or disorganised presentation. Most questions answered incorrectly or not at all."}]},{id:"teamwork",label:"Teamwork",shortLabel:"Teamwork",color:"#EF4444",mudek:["8.1","8.2"],max:10,rubric:[{range:"9â€“10",level:"Excellent",min:9,max:10,desc:"All members participate actively and equally. Professional and ethical conduct observed throughout."},{range:"7â€“8",level:"Good",min:7,max:8,desc:"Most members contribute. Minor knowledge gaps. Professionalism mostly observed."},{range:"4â€“6",level:"Developing",min:4,max:6,desc:"Uneven participation. Some members are passive or unprepared."},{range:"0â€“3",level:"Insufficient",min:0,max:3,desc:"Very low participation or dominated by one person. Lack of professionalism observed."}]}],Je=70,Kt={Excellent:{bg:"#DCFCE7",text:"#16A34A"},Good:{bg:"#F7FEE7",text:"#65A30D"},Developing:{bg:"#FEF9C3",text:"#CA8A04"},Insufficient:{bg:"#FEE2E2",text:"#DC2626"}},Ht={"1.1":{en:"Knowledge in mathematics, natural sciences, fundamental engineering, computational methods, and discipline-specific topics.",tr:"Matematik, fen bilimleri, temel mÃ¼hendislik, bilgisayarla hesaplama ve ilgili mÃ¼hendislik disiplinine Ã¶zgÃ¼ konularda bilgi."},"1.2":{en:"Ability to apply knowledge of mathematics, natural sciences, fundamental engineering, computation, and discipline-specific topics to solve complex engineering problems.",tr:"Matematik, fen bilimleri, temel mÃ¼hendislik, bilgisayarla hesaplama ve ilgili mÃ¼hendislik disiplinine Ã¶zgÃ¼ konulardaki bilgileri, karmaÅŸÄ±k mÃ¼hendislik problemlerinin Ã§Ã¶zÃ¼mÃ¼nde kullanabilme becerisi."},2:{en:"Ability to identify, formulate, and analyse complex engineering problems using fundamental science, mathematics, and engineering knowledge, with consideration of relevant UN Sustainable Development Goals.",tr:"KarmaÅŸÄ±k mÃ¼hendislik problemlerini, temel bilim, matematik ve mÃ¼hendislik bilgilerini kullanarak ve ele alÄ±nan problemle ilgili BM SÃ¼rdÃ¼rÃ¼lebilir KalkÄ±nma AmaÃ§larÄ±nÄ± gÃ¶zetarak tanÄ±mlama, formÃ¼le etme ve analiz becerisi."},"3.1":{en:"Ability to design creative solutions to complex engineering problems.",tr:"KarmaÅŸÄ±k mÃ¼hendislik problemlerine yaratÄ±cÄ± Ã§Ã¶zÃ¼mler tasarlama becerisi."},"3.2":{en:"Ability to design complex systems, processes, devices, or products under realistic constraints and conditions, meeting current and future requirements.",tr:"KarmaÅŸÄ±k sistemleri, sÃ¼reÃ§leri, cihazlarÄ± veya Ã¼rÃ¼nleri gerÃ§ekÃ§i kÄ±sÄ±tlarÄ± ve koÅŸullarÄ± gÃ¶zetarak, mevcut ve gelecekteki gereksinimleri karÅŸÄ±layacak biÃ§imde tasarlama becerisi."},4:{en:"Ability to select and use appropriate techniques, resources, and modern engineering and IT tools â€” including estimation and modelling â€” for the analysis and solution of complex engineering problems, with awareness of their limitations.",tr:"KarmaÅŸÄ±k mÃ¼hendislik problemlerinin analizi ve Ã§Ã¶zÃ¼mÃ¼ne yÃ¶nelik, tahmin ve modelleme de dahil olmak Ã¼zere, uygun teknikleri, kaynaklarÄ± ve modern mÃ¼hendislik ve biliÅŸim araÃ§larÄ±nÄ±, sÄ±nÄ±rlamalarÄ±nÄ±n da farkÄ±nda olarak seÃ§me ve kullanma becerisi."},5:{en:"Ability to use research methods for investigating complex engineering problems, including literature review, experiment design, experimentation, data collection, and analysis and interpretation of results.",tr:"KarmaÅŸÄ±k mÃ¼hendislik problemlerinin incelenmesi iÃ§in literatÃ¼r araÅŸtÄ±rmasÄ±, deney tasarlama, deney yapma, veri toplama, sonuÃ§larÄ± analiz etme ve yorumlama dahil, araÅŸtÄ±rma yÃ¶ntemlerini kullanma becerisi."},"6.1":{en:"Knowledge of the impacts of engineering applications on society, health and safety, economy, sustainability, and the environment within the scope of UN Sustainable Development Goals.",tr:"MÃ¼hendislik uygulamalarÄ±nÄ±n BM SÃ¼rdÃ¼rÃ¼lebilir KalkÄ±nma AmaÃ§larÄ± kapsamÄ±nda, topluma, saÄŸlÄ±k ve gÃ¼venliÄŸe, ekonomiye, sÃ¼rdÃ¼rÃ¼lebilirlik ve Ã§evreye etkileri hakkÄ±nda bilgi."},"6.2":{en:"Awareness of the legal consequences of engineering solutions.",tr:"MÃ¼hendislik Ã§Ã¶zÃ¼mlerinin hukuksal sonuÃ§larÄ± konusunda farkÄ±ndalÄ±k."},"7.1":{en:"Knowledge of acting in accordance with engineering professional principles and ethical responsibility.",tr:"MÃ¼hendislik meslek ilkelerine uygun davranma, etik sorumluluk hakkÄ±nda bilgi."},"7.2":{en:"Awareness of non-discrimination, impartiality, and inclusivity of diversity.",tr:"HiÃ§bir konuda ayrÄ±mcÄ±lÄ±k yapmadan, tarafsÄ±z davranma ve Ã§eÅŸitliliÄŸi kapsayÄ±cÄ± olma konularÄ±nda farkÄ±ndalÄ±k."},"8.1":{en:"Ability to work effectively as a team member or leader in intra-disciplinary teams (in-person, remote, or hybrid).",tr:"Bireysel olarak disiplin iÃ§i takÄ±m Ã§alÄ±ÅŸmalarÄ±nda (yÃ¼z yÃ¼ze, uzaktan veya karma) takÄ±m Ã¼yesi veya lideri olarak etkin biÃ§imde Ã§alÄ±ÅŸabilme becerisi."},"8.2":{en:"Ability to work effectively as a team member or leader in multidisciplinary teams (in-person, remote, or hybrid).",tr:"Bireysel olarak Ã§ok disiplinli takÄ±mlarda (yÃ¼z yÃ¼ze, uzaktan veya karma) takÄ±m Ã¼yesi veya lideri olarak etkin biÃ§imde Ã§alÄ±ÅŸabilme becerisi."},"9.1":{en:"Ability to communicate effectively on technical topics orally, adapting to audience differences (education, language, profession, etc.).",tr:"Hedef kitlenin Ã§eÅŸitli farklÄ±lÄ±klarÄ±nÄ± (eÄŸitim, dil, meslek gibi) dikkate alarak, teknik konularda sÃ¶zlÃ¼ etkin iletiÅŸim kurma becerisi."},"9.2":{en:"Ability to communicate effectively on technical topics in writing, adapting to audience differences (education, language, profession, etc.).",tr:"Hedef kitlenin Ã§eÅŸitli farklÄ±lÄ±klarÄ±nÄ± (eÄŸitim, dil, meslek gibi) dikkate alarak, teknik konularda yazÄ±lÄ± etkin iletiÅŸim kurma becerisi."},"10.1":{en:"Knowledge of business practices such as project management and economic feasibility analysis.",tr:"Proje yÃ¶netimi ve ekonomik yapÄ±labilirlik analizi gibi iÅŸ hayatÄ±ndaki uygulamalar hakkÄ±nda bilgi."},"10.2":{en:"Awareness of entrepreneurship and innovation.",tr:"GiriÅŸimcilik ve yenilikÃ§ilik hakkÄ±nda farkÄ±ndalÄ±k."},11:{en:"Lifelong learning skills including independent and continuous learning, adaptation to new and emerging technologies, and critical thinking about technological change.",tr:"BaÄŸÄ±msÄ±z ve sÃ¼rekli Ã¶ÄŸrenebilme, yeni ve geliÅŸmekte olan teknolojilere uyum saÄŸlayabilme ve teknolojik deÄŸiÅŸimlerle ilgili sorgulayÄ±cÄ± dÃ¼ÅŸÃ¼nebilmeyi kapsayan yaÅŸam boyu Ã¶ÄŸrenme becerisi."}};V.reduce((t,s)=>t+(Number(s.max)||0),0);const ct=oe==null?void 0:oe.scriptUrl,Oe=oe==null?void 0:oe.apiSecret;function qe(t,s){const r=t.trim().toLowerCase()+"__"+s.trim().toLowerCase();let i=5381;for(let n=0;n<r.length;n++)i=(i<<5)+i^r.charCodeAt(n),i=i>>>0;return i.toString(16).padStart(8,"0")}let Ge="";function Ue(t){Ge=t}function Le(){return Ge}function Ye(){Ge=""}async function ce(t){const s=Le();try{await fetch(ct,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,token:s})})}catch{}}async function pe(t){const s=new URLSearchParams(t).toString(),r=await fetch(`${ct}?${s}`,{cache:"no-store"});if(!r.ok)throw new Error(`HTTP ${r.status}`);const i=(await r.text()).trim();if(i.toLowerCase().startsWith("<html"))throw new Error("Received HTML from Apps Script â€” check your deployment URL.");try{return JSON.parse(i)}catch{throw new Error("Apps Script returned invalid JSON.")}}async function dt(t){return pe({...t,token:Le()})}function fe(t,s,r,i,n,o,l){var m,f,u,c;return{juryName:t,juryDept:s,jurorId:r,timestamp:new Date().toISOString(),projectId:o.id,projectName:o.name,technical:((m=i[o.id])==null?void 0:m.technical)??"",design:((f=i[o.id])==null?void 0:f.design)??"",delivery:((u=i[o.id])==null?void 0:u.delivery)??"",teamwork:((c=i[o.id])==null?void 0:c.teamwork)??"",total:Jt(i,o.id),comments:n[o.id]||"",status:l}}function Jt(t,s){return V.reduce((r,i)=>{var n;return r+(parseInt((n=t[s])==null?void 0:n[i.id],10)||0)},0)}async function qt(t){return pe({action:"checkPin",jurorId:t,secret:Oe})}async function Ut(t,s,r){return pe({action:"createPin",jurorId:t,juryName:s.trim(),juryDept:r.trim(),secret:Oe})}async function Yt(t,s){return pe({action:"verifyPin",jurorId:t,pin:String(s).trim(),secret:Oe})}async function Ve(){const t=await dt({action:"myscores"});if(t.status==="unauthorized"){const s=new Error("unauthorized");throw s.unauthorized=!0,s}return t.status!=="ok"?null:t.rows||[]}async function Qe(){return dt({action:"ping"})}const Xe=1500,be=()=>Object.fromEntries(W.map(t=>[t.id,Object.fromEntries(V.map(s=>[s.id,""]))])),ye=()=>Object.fromEntries(W.map(t=>[t.id,""])),Ze=()=>Object.fromEntries(W.map(t=>[t.id,Object.fromEntries(V.map(s=>[s.id,!1]))])),Vt=()=>Object.fromEntries(W.map(t=>[t.id,Object.fromEntries(V.map(s=>[s.id,!0]))])),he=(t,s)=>V.every(r=>{var i;return((i=t[s])==null?void 0:i[r.id])!==""}),et=t=>W.every(s=>he(t,s.id)),ut=t=>W.reduce((s,r)=>s+V.reduce((i,n)=>{var o;return i+(((o=t[r.id])==null?void 0:o[n.id])!==""?1:0)},0),0),Qt=(t,s)=>V.some(r=>{var i;return((i=t[s])==null?void 0:i[r.id])!==""});function Pe(t){const s=be(),r=ye();return(t||[]).forEach(i=>{const n=Number(i.projectId);n&&(s[n]={...s[n],technical:i.technical??"",design:i.design??"",delivery:i.delivery??"",teamwork:i.teamwork??""},r[n]=i.comments??"")}),{scores:s,comments:r}}function Xt(){const[t,s]=d.useState(""),[r,i]=d.useState(""),n=d.useRef("");d.useEffect(()=>{n.current=t.trim()&&r.trim()?qe(t,r):""},[t,r]);const[o,l]=d.useState("info"),[m,f]=d.useState(0),[u,c]=d.useState(be),[h,g]=d.useState(ye),[M,y]=d.useState(Ze),[C,x]=d.useState({}),[L,v]=d.useState(!1),[k,b]=d.useState(null),[S,p]=d.useState(null),[j,I]=d.useState(null),[z,K]=d.useState("idle"),[A,$]=d.useState("idle"),[H,O]=d.useState(""),[Q,J]=d.useState(""),[q,U]=d.useState(3),[se,ne]=d.useState(!1),[le,N]=d.useState(""),a=d.useRef(!1),F=d.useRef({});F.current={juryName:t,juryDept:r,scores:u,comments:h,groupSynced:C,current:m};const w=d.useRef(u),D=d.useRef(h),G=d.useCallback(E=>{const{juryName:P,juryDept:_}=F.current,T=n.current,R=w.current,B=D.current;if(!P.trim()||!T||!Le()||!Qt(R,E))return;const ie=W.find($t=>$t.id===E);if(!ie)return;const Se=he(R,E)?"group_submitted":"in_progress",_t=fe(P,_,T,R,B,ie,Se);K("saving"),ce({rows:[_t]}),setTimeout(()=>K("saved"),500),setTimeout(()=>K("idle"),2500)},[]),te=d.useCallback(E=>{var T;const{current:P}=F.current,_=(T=W[P])==null?void 0:T.id;_!==void 0&&G(_),f(E)},[G]);d.useEffect(()=>{if(o!=="eval"||L)return;const E={};W.forEach(P=>{!C[P.id]&&he(u,P.id)&&(E[P.id]=!0)}),Object.keys(E).length>0&&x(P=>({...P,...E}))},[u,o,C,L]),d.useEffect(()=>{if(o!=="eval"||a.current||L||!W.every(P=>C[P.id]))return;a.current=!0;const E=setTimeout(()=>{const{juryName:P,juryDept:_,scores:T,comments:R}=F.current,B=n.current;ce({rows:W.map(ie=>fe(P,_,B,T,R,ie,"all_submitted"))}),b({...T}),p({...R}),l("done")},800);return()=>clearTimeout(E)},[C,o,L]);const Z=d.useCallback((E,P,_)=>{const T={...w.current,[E]:{...w.current[E],[P]:_}};w.current=T,c(T),y(R=>({...R,[E]:{...R[E],[P]:!0}})),_===""&&C[E]&&x(R=>({...R,[E]:!1}))},[C]),ae=d.useCallback((E,P)=>{var R;const _=V.find(B=>B.id===P),T=(R=w.current[E])==null?void 0:R[P];if(y(B=>({...B,[E]:{...B[E],[P]:!0}})),T!==""&&T!==void 0){const B=parseInt(T,10),ie=Number.isFinite(B)?Math.min(Math.max(B,0),_.max):0;if(String(ie)!==String(T)){const Se={...w.current,[E]:{...w.current[E],[P]:ie}};w.current=Se,c(Se)}}G(E)},[G]),Y=d.useCallback((E,P)=>{const _={...D.current,[E]:P};D.current=_,g(_)},[]),re=d.useCallback(E=>{G(E)},[G]),ee=d.useCallback((E,P)=>{const{juryName:_,juryDept:T}=F.current,R=n.current;ce({rows:W.map(B=>fe(_,T,R,E,P,B,"all_submitted"))}),b({...E}),p({...P}),v(!1),a.current=!0,l("done")},[]),we=d.useCallback(async()=>{const{juryName:E,juryDept:P}=F.current,_=n.current,T=k||u,R=S||h;_&&ce({action:"resetJuror"}),w.current=T,D.current=R,c(T),g(R),v(!0),a.current=!1,x(Object.fromEntries(W.map(B=>[B.id,!0]))),l("eval"),setTimeout(()=>{_&&ce({rows:W.map(B=>fe(E,P,_,T,R,B,"group_submitted"))})},Xe)},[k,S,u,h]),kt=d.useCallback(()=>{if(!et(u)){y(Vt());const E=W.findIndex(P=>!he(u,P.id));E>=0&&f(E);return}ee(u,h)},[u,h,ee]),ue=d.useCallback(E=>{Ye(),N(E||"Your session has expired. Please enter your PIN again."),ne(!0)},[]),Nt=d.useCallback(()=>{ne(!1),N(""),O(""),$("entering"),l("pin")},[]),me=d.useCallback(async()=>{I({loading:!0});let E=[];try{E=await Ve()||[]}catch(R){if(R.unauthorized){ue("Your session has expired. Please enter your PIN again.");return}}const P=W.length,_=E.filter(R=>R.status==="group_submitted"||R.status==="all_submitted").length,T=E.length>=P&&E.every(R=>R.status==="all_submitted");I({rows:E,filledCount:_,totalCount:P,allSubmitted:T})},[ue]);d.useEffect(()=>{if(o!=="eval")return;const E=setInterval(async()=>{try{(await Qe()).status==="unauthorized"&&ue("Your session was ended because you signed in from another device.")}catch{}},15e3);return()=>clearInterval(E)},[o,ue]),d.useEffect(()=>{if(o!=="eval")return;async function E(){if(document.visibilityState==="visible")try{(await Qe()).status==="unauthorized"&&ue("Your session was ended because you signed in from another device.")}catch{}}return document.addEventListener("visibilitychange",E),()=>document.removeEventListener("visibilitychange",E)},[o,ue]);const wt=d.useCallback(()=>{const E=j;if(E){if(I(null),E.allSubmitted){const{scores:P,comments:_}=Pe(E.rows);w.current=P,D.current=_,c(P),g(_),b(P),p(_),x(Object.fromEntries(W.map(T=>[T.id,!0]))),a.current=!0,l("done");return}if(E.rows.length>0){const{scores:P,comments:_}=Pe(E.rows),T=Object.fromEntries(E.rows.filter(B=>B.status==="group_submitted"||B.status==="all_submitted").map(B=>[Number(B.projectId),!0]));w.current=P,D.current=_,c(P),g(_),x(T);const R=W.findIndex(B=>!he(P,B.id));f(R>=0?R:0),a.current=!1}l("eval")}},[j]),St=d.useCallback(()=>{const E=be(),P=ye();w.current=E,D.current=P,I(null),c(E),g(P),x({}),f(0),a.current=!1,v(!1),l("eval")},[]),Ct=d.useCallback(async()=>{const{juryName:E,juryDept:P}=F.current,_=n.current;let T=be(),R=ye();try{const B=await Ve();if(B!=null&&B.length){const ie=Pe(B);T=ie.scores,R=ie.comments}}catch{}_&&ce({action:"resetJuror"}),w.current=T,D.current=R,c(T),g(R),b(T),p(R),v(!0),a.current=!1,x(Object.fromEntries(W.map(B=>[B.id,!0]))),l("eval"),setTimeout(()=>{_&&ce({rows:W.map(B=>fe(E,P,_,T,R,B,"group_submitted"))})},Xe)},[]),Lt=d.useCallback(async()=>{const{juryName:E,juryDept:P}=F.current;if(!E.trim()||!P.trim())return;const _=qe(E,P);if(n.current=_,I({loading:!0}),Le()){await me();return}try{const T=await qt(_);if(T.status!=="ok"){I(null),O("Could not reach the server. Please try again."),$("entering"),l("pin");return}if(T.exists)I(null),$("entering"),O(""),U(3),l("pin");else{const R=await Ut(_,E,P);R.status==="ok"?(I(null),Ue(R.token),J(R.pin),$("new"),l("pin")):(I(null),O("Could not create a PIN. Please try again."),$("entering"),l("pin"))}}catch{I(null),O("Connection error. Please check your network and try again."),$("entering"),l("pin")}},[me]),Mt=d.useCallback(async E=>{const P=n.current;I({loading:!0});try{const _=await Yt(P,E);if(_.locked){I(null),$("locked"),O("Too many failed attempts. Please contact the admin to reset your PIN.");return}if(_.valid){Ue(_.token||""),$("idle"),O(""),await me();return}I(null);const T=typeof _.attemptsLeft=="number"?_.attemptsLeft:q-1;U(T),T<=0?($("locked"),O("Too many failed attempts. Please contact the admin.")):O(`Incorrect PIN. ${T} attempt${T!==1?"s":""} remaining.`)}catch{I(null),O("Could not verify PIN. Please try again.")}},[q,me]),Et=d.useCallback(async()=>{await me()},[me]),At=d.useCallback(()=>{const E=be(),P=ye();w.current=E,D.current=P,s(""),i(""),l("info"),f(0),c(E),g(P),y(Ze()),x({}),I(null),v(!1),b(null),p(null),K("idle"),$("idle"),O(""),J(""),U(3),a.current=!1,n.current="",Ye()},[]),Ft=W[m],It=W.length*V.length,Pt=Math.round(ut(u)/It*100),Dt=et(u);return{juryName:t,setJuryName:s,juryDept:r,setJuryDept:i,jurorId:n.current,step:o,setStep:l,current:m,handleNavigate:te,scores:u,comments:h,touched:M,handleScore:Z,handleScoreBlur:ae,handleCommentChange:Y,handleCommentBlur:re,project:Ft,progressPct:Pt,allComplete:Dt,groupSynced:C,editMode:L,doneScores:k,doneComments:S,sheetProgress:j,saveStatus:z,pinStep:A,pinError:H,newPin:Q,attemptsLeft:q,handlePinSubmit:Mt,handlePinAcknowledge:Et,sessionKicked:se,kickedMsg:le,handleKickedAcknowledge:Nt,handleStart:Lt,handleConfirmFromSheet:wt,handleStartFresh:St,handleResubmit:Ct,handleEditScores:we,handleFinalSubmit:kt,resetAll:At}}function Fe(){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}function tt(){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"7.5",cy:"15.5",r:"5.5"}),e.jsx("path",{d:"M21 2l-9.6 9.6"}),e.jsx("path",{d:"M15.5 7.5l3 3L22 7l-3-3"})]})}function Zt(){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}function es(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function ts(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]})}function Re(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]})}function ss(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 6v6l4 2"})]})}function Me(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M5 2h14"}),e.jsx("path",{d:"M5 22h14"}),e.jsx("path",{d:"M7 2c0 6 10 6 10 10s-10 4-10 10"}),e.jsx("path",{d:"M17 2c0 6-10 6-10 10s10 4 10 10"})]})}function Ee(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 3a2.85 2.85 0 1 1 4 4L7 21H3v-4L17 3z"}),e.jsx("path",{d:"m15 5 4 4"})]})}function ns(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m3 6 2 2 4-4"}),e.jsx("path",{d:"m3 12 2 2 4-4"}),e.jsx("path",{d:"m3 18 2 2 4-4"}),e.jsx("path",{d:"M11 6h10"}),e.jsx("path",{d:"M11 12h10"}),e.jsx("path",{d:"M11 18h10"})]})}function de(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 3H2l8 9v7l4 2v-9l8-9z"})})}function mt(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v12"}),e.jsx("path",{d:"m7 10 5 5 5-5"}),e.jsx("path",{d:"M5 21h14"})]})}function ht(){return e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21 16-4 4-4-4"}),e.jsx("path",{d:"M17 20V4"}),e.jsx("path",{d:"m3 8 4-4 4 4"}),e.jsx("path",{d:"M7 4v16"})]})}function pt(){return e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m5 12 7-7 7 7"}),e.jsx("path",{d:"M12 19V5"})]})}function xt(){return e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 5v14"}),e.jsx("path",{d:"m19 12-7 7-7-7"})]})}function ft(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4"}),e.jsx("path",{d:"M12 8h.01"})]})}function rs(){return e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("circle",{cx:"12",cy:"12",r:"9"})})}function is(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 4h8v3a4 4 0 0 1-8 0V4z"}),e.jsx("path",{d:"M5 6h3v2a4 4 0 0 1-3 3"}),e.jsx("path",{d:"M19 6h-3v2a4 4 0 0 0 3 3"}),e.jsx("path",{d:"M12 11v4"}),e.jsx("path",{d:"M8 19h8"}),e.jsx("path",{d:"M10 15h4"})]})}function as(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 3v18h18"}),e.jsx("path",{d:"M7 14l4-4 3 3 5-6"})]})}function os(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"2",width:"6",height:"4",rx:"1"}),e.jsx("path",{d:"M9 4H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-2"})]})}function ls(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})}function cs(){return e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 10v6"}),e.jsx("path",{d:"M2 10l10-5 10 5-10 5z"}),e.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})}function ds(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M6 6l12 12M18 6l-12 12"})})}function Be(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M5 12l4 4 10-10"})})}function us(){return e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]})}function ms(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})})}function jt(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})}function gt(){return e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M3 5l4 4 4-4"})})}function hs({juryName:t,setJuryName:s,juryDept:r,setJuryDept:i,onStart:n,onBack:o}){const l=t.trim().length>0&&r.trim().length>0;return e.jsxs("div",{className:"form-screen",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("button",{className:"back-btn",onClick:o,"aria-label":"Back to home",children:e.jsx(Fe,{})}),e.jsxs("div",{children:[e.jsx("h2",{children:"Evaluation Form"}),e.jsx("p",{children:"EE 491/492 â€” Senior Project Poster Day"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"Jury Member Information"}),e.jsx("div",{className:"identity-warning",children:"âš ï¸ Please enter your name and department carefully. Once you begin the evaluation, these cannot be changed."}),e.jsxs("div",{className:"field",children:[e.jsxs("label",{htmlFor:"jury-name",children:["Full Name ",e.jsx("span",{className:"req",children:"*"})]}),e.jsx("input",{id:"jury-name",value:t,onChange:m=>s(m.target.value),placeholder:"e.g. Prof. Dr. Jane Smith",autoComplete:"name",autoFocus:!0})]}),e.jsxs("div",{className:"field",children:[e.jsxs("label",{htmlFor:"jury-dept",children:["Department / Institution ",e.jsx("span",{className:"req",children:"*"})]}),e.jsx("input",{id:"jury-dept",value:r,onChange:m=>i(m.target.value),placeholder:"e.g. EEE Dept. / TED University",onKeyDown:m=>{m.key==="Enter"&&l&&n()}})]}),e.jsx("p",{className:"draft-device-note",children:"â„¹ï¸ Scores save automatically when you fill in each field or navigate between groups. Your PIN lets you continue from any device."}),e.jsx("button",{className:"btn-primary",disabled:!l,onClick:n,children:"Start Evaluation â†’"})]})]})}function ps({onSubmit:t,pinError:s}){const[r,i]=d.useState(["","","",""]),n=[d.useRef(null),d.useRef(null),d.useRef(null),d.useRef(null)];d.useEffect(()=>{s&&(i(["","","",""]),setTimeout(()=>{var c;return(c=n[0].current)==null?void 0:c.focus()},50))},[s]);function o(c,h){var y;const g=h.replace(/\D/g,"").slice(-1),M=[...r];M[c]=g,i(M),g&&c<3&&((y=n[c+1].current)==null||y.focus())}function l(c,h){var g,M,y;if(h.key==="Backspace")if(r[c]===""&&c>0){const C=[...r];C[c-1]="",i(C),(g=n[c-1].current)==null||g.focus()}else{const C=[...r];C[c]="",i(C)}if(h.key==="ArrowLeft"&&c>0&&((M=n[c-1].current)==null||M.focus()),h.key==="ArrowRight"&&c<3&&((y=n[c+1].current)==null||y.focus()),h.key==="Enter"){const C=r.join("");C.length===4&&t(C)}}function m(c){var g;const h=c.clipboardData.getData("text").replace(/\D/g,"").slice(0,4);if(h.length===4){const M=h.split("");i(M),(g=n[3].current)==null||g.focus()}c.preventDefault()}function f(){const c=r.join("");c.length===4&&t(c)}const u=r.every(c=>c!=="");return e.jsxs("div",{className:"pin-input-group",children:[e.jsx("div",{className:"pin-boxes-row",children:r.map((c,h)=>e.jsx("input",{ref:n[h],type:"password",inputMode:"numeric",maxLength:1,value:c,autoFocus:h===0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,"data-lpignore":"true","data-form-type":"other",onChange:g=>o(h,g.target.value),onKeyDown:g=>l(h,g),onPaste:h===0?m:void 0,className:"pin-box"},h))}),e.jsx("button",{className:"btn-primary pin-ok-btn",onClick:f,disabled:!u,children:"OK â†’"})]})}function xs({pinStep:t,pinError:s,newPin:r,attemptsLeft:i,juryName:n,onPinSubmit:o,onPinAcknowledge:l}){return t==="new"?e.jsx("div",{className:"form-screen",children:e.jsxs("div",{className:"info-card pin-card",children:[e.jsx("div",{className:"pin-icon-wrap",children:e.jsx(tt,{})}),e.jsx("h3",{children:"Your Access PIN"}),e.jsxs("p",{className:"pin-intro",children:["Welcome, ",e.jsx("strong",{children:n}),"! A 4-digit PIN has been assigned to protect your evaluations. Please save it â€” you will need it every time you log in from a new device or browser tab."]}),e.jsx("div",{className:"pin-display","aria-label":"Your PIN",children:String(r).split("").map((m,f)=>e.jsx("span",{className:"pin-digit",children:m},f))}),e.jsx("p",{className:"pin-hint",children:"ðŸ”’ Keep this PIN private. If you lose it, contact the admin to reset it."}),e.jsx("button",{className:"btn-primary",onClick:l,children:"I've saved my PIN â€” Continue â†’"})]})}):t==="locked"?e.jsx("div",{className:"form-screen",children:e.jsxs("div",{className:"info-card pin-card",children:[e.jsx("div",{className:"pin-icon-wrap lock-icon",children:"ðŸ”’"}),e.jsx("h3",{children:"Account Locked"}),e.jsx("p",{className:"pin-error-msg",children:s})]})}):e.jsx("div",{className:"form-screen",children:e.jsxs("div",{className:"info-card pin-card",children:[e.jsx("div",{className:"pin-icon-wrap",children:e.jsx(tt,{})}),e.jsx("h3",{children:"Enter Your PIN"}),e.jsxs("p",{className:"pin-intro",children:["Welcome back, ",e.jsx("strong",{children:n}),". Enter your 4-digit PIN and press OK to continue."]}),e.jsx(ps,{onSubmit:o,pinError:s}),s&&e.jsx("div",{className:"pin-error-msg",children:s})]})})}function fs(t){return t===0?"#e2e8f0":t<34?"linear-gradient(90deg,#ef4444,#f97316)":t<67?"linear-gradient(90deg,#f97316,#eab308)":t<100?"linear-gradient(90deg,#eab308,#84cc16)":"linear-gradient(90deg,#84cc16,#22c55e)"}function js({saveStatus:t}){return t==="saving"?e.jsx("span",{className:"autosave-dot saving",children:"â³ Savingâ€¦"}):t==="saved"?e.jsx("span",{className:"autosave-dot saved",children:"âœ“ Saved"}):e.jsx("span",{className:"autosave-dot idle",children:"â— Auto-saving"})}function gs({juryName:t,juryDept:s,current:r,onNavigate:i,scores:n,comments:o,touched:l,groupSynced:m,editMode:f,progressPct:u,allComplete:c,saveStatus:h,handleScore:g,handleScoreBlur:M,handleCommentChange:y,handleCommentBlur:C,handleFinalSubmit:x,onGoHome:L}){var K;const[v,k]=d.useState(!1),[b,S]=d.useState(null),p=W[r],j=(A,$)=>{const H=V.filter(Q=>{var J;return((J=n[A.id])==null?void 0:J[Q.id])!==""}).length;return`${he(n,A.id)?"âœ…":"âš ï¸"} ${A.name} (${H}/${V.length})`},I=()=>{r>0&&i(r-1)},z=()=>{r<W.length-1&&i(r+1)};return e.jsxs("div",{className:"form-screen eval-screen",children:[e.jsxs("div",{className:"eval-sticky-header",children:[e.jsxs("div",{className:"eval-identity-bar",children:[e.jsx("span",{className:"eval-identity-icon",children:"ðŸ‘¤"}),e.jsxs("span",{className:"eval-identity-text",children:[t,s&&e.jsxs("span",{className:"eval-identity-dept",children:[" (",s,")"]})]}),e.jsx("span",{className:"eval-identity-save",children:e.jsx(js,{saveStatus:h})}),e.jsx("button",{className:"eval-home-btn-icon",onClick:()=>k(!0),"aria-label":"Home",children:e.jsx(Fe,{})})]}),e.jsxs("div",{className:"eval-project-card",children:[e.jsxs("div",{className:"eval-project-line1",children:[e.jsx("span",{className:"eval-group-label",children:p.name}),e.jsx("span",{className:"eval-project-name",children:p.desc})]}),((K=p.students)==null?void 0:K.length)>0&&e.jsxs("div",{className:"eval-project-line2",children:["ðŸ‘¥ ",p.students.join(" Â· ")]})]}),e.jsxs("div",{className:"eval-nav-row",children:[e.jsx("button",{className:"group-nav-btn",onClick:I,disabled:r===0,"aria-label":"Previous group",children:e.jsx(ms,{})}),e.jsx("select",{className:"group-nav-select",value:r,onChange:A=>i(Number(A.target.value)),children:W.map((A,$)=>e.jsx("option",{value:$,children:j(A)},A.id))}),e.jsx("button",{className:"group-nav-btn",onClick:z,disabled:r===W.length-1,"aria-label":"Next group",children:e.jsx(jt,{})})]}),e.jsx("div",{className:"eval-progress-row",children:e.jsxs("div",{className:"eval-progress-track",children:[e.jsx("div",{className:"eval-progress-fill",style:{width:`${u}%`,background:fs(u)}}),e.jsxs("span",{className:"eval-progress-label",children:[Math.round(u),"%"]})]})})]}),v&&e.jsx("div",{className:"back-menu-overlay",onClick:()=>k(!1),children:e.jsxs("div",{className:"back-menu",onClick:A=>A.stopPropagation(),children:[e.jsx("p",{className:"back-menu-title",children:"Leave evaluation?"}),e.jsx("p",{className:"back-menu-sub",children:"Your progress is saved. You can continue any time."}),e.jsx("button",{className:"back-menu-btn primary",onClick:()=>{k(!1),L()},children:"ðŸ  Go to Home"}),e.jsx("button",{className:"back-menu-btn ghost",onClick:()=>k(!1),children:"Cancel"})]})}),e.jsxs("div",{className:"eval-body",children:[m[p.id]&&!f&&e.jsx("div",{className:"group-done-banner",children:"âœ… All scores saved for this group."}),f&&e.jsxs("div",{className:"group-done-banner edit-mode-banner",children:["âœï¸ Edit mode â€” adjust scores then click ",e.jsx("strong",{children:"Submit Final"}),"."]}),V.map(A=>{var Q,J;const $=((Q=n[p.id])==null?void 0:Q[A.id])??"",H=((J=l[p.id])==null?void 0:J[A.id])&&$==="",O=(parseInt($,10)||0)/A.max*100;return e.jsxs("div",{className:`crit-card${H?" invalid":""}`,children:[e.jsxs("div",{className:"crit-header",children:[e.jsxs("div",{children:[e.jsx("div",{className:"crit-label",children:A.label}),e.jsxs("div",{className:"crit-max",children:["Maximum: ",A.max," pts"]})]}),e.jsx("button",{className:"rubric-btn",onClick:()=>S(b===A.id?null:A.id),children:b===A.id?"Hide Rubric â–²":"Show Rubric â–¼"})]}),b===A.id&&e.jsx("div",{className:"rubric-table",children:A.rubric.map(q=>e.jsxs("div",{className:"rubric-row",children:[e.jsx("div",{className:"rubric-range",children:q.range}),e.jsx("div",{className:"rubric-level",children:q.level}),e.jsx("div",{className:"rubric-desc",children:q.desc})]},q.range))}),e.jsxs("div",{className:"score-input-row",children:[e.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:A.max,value:$,onChange:q=>g(p.id,A.id,q.target.value),onBlur:()=>M(p.id,A.id),placeholder:"â€”",className:"score-input"}),e.jsx("span",{className:"score-bar-wrap",children:e.jsx("span",{className:"score-bar",style:{width:`${O}%`}})}),e.jsx("span",{className:"score-pct",children:$!==""?`${$} / ${A.max}`:`â€” / ${A.max}`})]}),H&&e.jsx("div",{className:"required-hint",children:"Required"})]},A.id)}),e.jsxs("div",{className:"crit-card comment-card",children:[e.jsx("div",{className:"crit-label",children:"Comments (Optional)"}),e.jsx("textarea",{value:o[p.id]||"",onChange:A=>y(p.id,A.target.value),onBlur:()=>C(p.id),placeholder:"Any additional feedback about this groupâ€¦",rows:3})]}),e.jsxs("div",{className:"total-bar",children:[e.jsx("span",{children:"Total"}),(()=>{const A=V.reduce(($,H)=>{var O;return $+(parseInt((O=n[p.id])==null?void 0:O[H.id],10)||0)},0);return e.jsxs("span",{className:`total-score${A>=80?" high":A>=60?" mid":""}`,children:[A," / 100"]})})()]}),f&&e.jsx("button",{className:"btn-primary",style:{width:"100%",marginTop:8,opacity:c?1:.65},onClick:x,children:c?"âœ… Submit Final":`âš ï¸ Submit Final (${ut(n)} / ${W.length*V.length} filled)`})]})]})}function vs(t,s){return V.reduce((r,i)=>{var n;return r+(parseInt((n=t[s])==null?void 0:n[i.id],10)||0)},0)}function bs({doneScores:t,scores:s,onEditScores:r,onBack:i}){const n=t||s,[o,l]=d.useState(new Set);function m(f){l(u=>{const c=new Set(u);return c.has(f)?c.delete(f):c.add(f),c})}return e.jsx("div",{className:"done-screen",children:e.jsxs("div",{className:"done-card",children:[e.jsx("div",{className:"done-icon",children:"ðŸŽ‰"}),e.jsx("h2",{children:"Thank You!"}),e.jsx("p",{className:"done-subtitle",children:"Your evaluations have been recordedâ€”thank you for your feedback."}),e.jsx("div",{className:"done-summary",children:W.map(f=>{var g,M;const u=o.has(f.id),c=`done-group-panel-${f.id}`,h=!!f.desc||((g=f.students)==null?void 0:g.length)>0;return e.jsxs("div",{className:"done-row-wrap",children:[e.jsxs("div",{className:"done-row group-accordion-header",role:"button",tabIndex:h?0:-1,"aria-expanded":u,"aria-controls":c,onClick:()=>{h&&m(f.id)},onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&h&&(y.preventDefault(),m(f.id))},style:{cursor:h?"pointer":"default"},children:[e.jsx("div",{className:"done-row-left",children:e.jsxs("div",{className:"done-row-header-line",children:[e.jsx("span",{className:"done-row-name",children:f.name}),h&&e.jsx("span",{className:`group-accordion-chevron${u?" open":""}`,children:e.jsx(gt,{})})]})}),e.jsx("div",{className:"done-row-right",children:e.jsxs("span",{className:"done-score",children:[e.jsx("span",{className:"done-score-main",children:vs(n,f.id)}),e.jsx("span",{className:"done-score-max",children:" / 100"})]})})]}),e.jsx("div",{id:c,className:`group-accordion-panel${u?" open":""}`,children:e.jsxs("div",{className:"group-accordion-panel-inner done-accordion-inner",children:[f.desc&&e.jsx("span",{className:"done-row-desc",children:f.desc}),((M=f.students)==null?void 0:M.length)>0&&e.jsxs("span",{className:"done-row-students",children:["ðŸ‘¥ ",f.students.join(" Â· ")]})]})})]},f.id)})}),e.jsxs("div",{className:"done-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:r,children:"âœï¸ Edit Scores"}),e.jsxs("button",{className:"btn-primary",onClick:i,children:[e.jsx(Fe,{})," Back to Home"]})]})]})})}function ys(t){return t==="all_submitted"?{label:"Submitted",color:"#166534",bg:"#dcfce7"}:t==="group_submitted"?{label:"Complete",color:"#1e40af",bg:"#dbeafe"}:t==="in_progress"?{label:"In progress",color:"#92400e",bg:"#fef9c3"}:{label:"â€”",color:"#64748b",bg:"#f1f5f9"}}function Ce({progress:t,onConfirm:s,onFresh:r}){if(!t)return null;if(t.loading)return e.jsx("div",{className:"spd-overlay",children:e.jsx("div",{className:"spd-card",children:e.jsxs("div",{className:"spd-header",children:[e.jsx("div",{className:"spd-icon",children:"â³"}),e.jsxs("div",{children:[e.jsx("div",{className:"spd-title",children:"Checking your progressâ€¦"}),e.jsx("div",{className:"spd-sub",children:"Connecting to server"})]})]})})});const{rows:i,filledCount:n,totalCount:o,allSubmitted:l}=t,m=i&&i.length>0;return e.jsx("div",{className:"spd-overlay",children:e.jsxs("div",{className:"spd-card",children:[e.jsxs("div",{className:"spd-header",children:[e.jsx("div",{className:"spd-icon",children:l?"âœ…":m?"â˜ï¸":"ðŸ“‹"}),e.jsxs("div",{children:[e.jsx("div",{className:"spd-title",children:l?"All evaluations submitted":m?"Saved progress found":"No saved data found"}),e.jsxs("div",{className:"spd-sub",children:[n," / ",o," groups completed on server"]})]})]}),m&&e.jsx("div",{className:"spd-list",children:W.map(f=>{const u=i.find(g=>Number(g.projectId)===f.id),c=ys(u==null?void 0:u.status),h=(u==null?void 0:u.total)??"â€”";return e.jsxs("div",{className:"spd-row",children:[e.jsx("span",{className:"spd-row-name",children:f.name}),e.jsx("span",{className:"spd-row-total",children:h!=="â€”"?`${h}/100`:"â€”"}),e.jsx("span",{className:"spd-chip",style:{color:c.color,background:c.bg},children:c.label})]},f.id)})}),!m&&e.jsxs("p",{className:"spd-empty",children:["No evaluations were found on the server for your account."," ","You can start a fresh evaluation below."]}),e.jsxs("div",{className:"spd-actions",children:[e.jsx("button",{className:"btn-primary",onClick:s,children:l?"View / Edit My Scores":m?"Continue from here":"Start Evaluation"}),m&&!l&&e.jsx("button",{className:"btn-secondary",onClick:r,children:"Start Fresh"})]})]})})}function ks({onBack:t}){const{step:s,juryName:r,setJuryName:i,juryDept:n,setJuryDept:o,current:l,handleNavigate:m,scores:f,comments:u,touched:c,groupSynced:h,editMode:g,progressPct:M,allComplete:y,doneScores:C,doneComments:x,sheetProgress:L,saveStatus:v,pinStep:k,pinError:b,newPin:S,attemptsLeft:p,handleScore:j,handleScoreBlur:I,handleCommentChange:z,handleCommentBlur:K,handleStart:A,handleConfirmFromSheet:$,handleStartFresh:H,handleResubmit:O,handleEditScores:Q,handleFinalSubmit:J,handlePinSubmit:q,handlePinAcknowledge:U,sessionKicked:se,kickedMsg:ne,handleKickedAcknowledge:le,resetAll:N}=Xt();return se?e.jsx("div",{className:"kicked-overlay",children:e.jsxs("div",{className:"kicked-card",children:[e.jsx("div",{className:"kicked-icon",children:"ðŸ”"}),e.jsx("div",{className:"kicked-title",children:"Session Ended"}),e.jsx("div",{className:"kicked-body",children:ne}),e.jsx("button",{className:"btn-primary",onClick:le,children:"Sign in again"})]})}):s==="done"?e.jsxs(e.Fragment,{children:[e.jsx(bs,{doneScores:C,doneComments:x,scores:f,comments:u,onEditScores:Q,onBack:()=>{N(),t()}}),e.jsx(Ce,{progress:L,onConfirm:$,onFresh:H})]}):s==="pin"?e.jsxs(e.Fragment,{children:[e.jsx(xs,{pinStep:k,pinError:b,newPin:S,attemptsLeft:p,juryName:r,onPinSubmit:q,onPinAcknowledge:U}),e.jsx(Ce,{progress:L,onConfirm:$,onFresh:H})]}):s==="eval"?e.jsxs(e.Fragment,{children:[e.jsx(gs,{juryName:r,juryDept:n,current:l,onNavigate:m,scores:f,comments:u,touched:c,groupSynced:h,editMode:g,progressPct:M,allComplete:y,saveStatus:v,handleScore:j,handleScoreBlur:I,handleCommentChange:z,handleCommentBlur:K,handleFinalSubmit:J,onGoHome:t}),e.jsx(Ce,{progress:L,onConfirm:$,onFresh:H})]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{juryName:r,setJuryName:i,juryDept:n,setJuryDept:o,onStart:A,onBack:t}),e.jsx(Ce,{progress:L,onConfirm:$,onFresh:H})]})}const Ns="modulepreload",ws=function(t){return"/senior-design-jury/"+t},st={},Ss=function(s,r,i){if(!r||r.length===0)return s();const n=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=ws(o),o in st)return;st[o]=!0;const l=o.endsWith(".css"),m=l?'[rel="stylesheet"]':"";if(!!i)for(let c=n.length-1;c>=0;c--){const h=n[c];if(h.href===o&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${m}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Ns,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>s()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},Cs=new Map(W.map((t,s)=>typeof t=="string"?[s+1,{desc:"",students:[]}]:[t.id??s+1,{desc:t.desc??"",students:t.students??[]}]));function Ls(t){const s=Number(String(t??"").trim().replace(/^"+|"+$/g,"").replace(",","."));return Number.isFinite(s)?s:0}function Ie(t){if(!t)return 0;const s=String(t).trim().replace(/\s*,\s*/g,", "),r=Date.parse(s);if(Number.isFinite(r))return r;const i=s.match(/^([0-3]?\d)\/([0-1]?\d)\/(\d{4}),?\s*([0-2]?\d):([0-5]\d)(?::([0-5]\d))?$/);if(i)return new Date(+i[3],+i[2]-1,+i[1],+i[4],+i[5],+(i[6]||0)).getTime()||0;const n=s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})(?:\s+(\d{1,2}):(\d{2})(?::(\d{2}))?\s*(AM|PM)?)?$/i);if(!n)return 0;let o=+(n[4]||0);const l=(n[7]||"").toUpperCase();return l==="PM"&&o<12&&(o+=12),l==="AM"&&o===12&&(o=0),new Date(+n[3],+n[1]-1,+n[2],o,+(n[5]||0),+(n[6]||0)).getTime()||0}function We(t){if(!t)return"â€”";const s=Ie(t);if(!s)return String(t);const r=new Date(s),i=n=>String(n).padStart(2,"0");return`${i(r.getDate())}/${i(r.getMonth()+1)}/${r.getFullYear()} ${i(r.getHours())}:${i(r.getMinutes())}`}function Ne(t,s){const r=Number(t),i=Number(s);return Number.isFinite(r)&&Number.isFinite(i)?r-i:String(t??"").toLowerCase()<String(s??"").toLowerCase()?-1:1}function vt(t){let s=2166136261;for(let r=0;r<t.length;r++)s^=t.charCodeAt(r),s=Math.imul(s,16777619);return s>>>0}function bt(t,s,r){s/=100,r/=100;const i=l=>(l+t/30)%12,n=s*Math.min(r,1-r),o=l=>Math.round(255*(r-n*Math.max(-1,Math.min(i(l)-3,Math.min(9-i(l),1))))).toString(16).padStart(2,"0");return`#${o(0)}${o(8)}${o(4)}`}const Ms=t=>bt(vt(t||"?")%360,55,95),Es=t=>bt(vt(t||"?")%360,65,55);function je(t){return t===""||t===null||t===void 0||typeof t=="string"&&t.trim()===""||typeof t=="number"&&!Number.isFinite(t)?"":t}async function As(t){const s=await Ss(()=>import("./xlsx-6ed613d4.js"),[]),r=["Juror Name","Department / Institution","Timestamp","Group Name","Group Desc","Students","Technical (30)","Written (30)","Oral (30)","Teamwork (10)","Total (100)","Comments"],i=t.map(u=>{const c=Cs.get(u.projectId)||{desc:"",students:[]};return[u.juryName??"",u.juryDept??"",u.timestamp??"",u.projectName??"",c.desc,c.students.join(" Â· "),je(u.technical),je(u.design),je(u.delivery),je(u.teamwork),je(u.total),u.comments??""]}),n=s.utils.aoa_to_sheet([r,...i]);n["!cols"]=[20,22,18,20,24,28,14,12,10,13,10,30].map(u=>({wch:u}));const o=s.utils.book_new();s.utils.book_append_sheet(o,n,"Jury Evaluations");const l=new Date,m=l.toISOString().slice(0,10),f=`${String(l.getHours()).padStart(2,"0")}-${String(l.getMinutes()).padStart(2,"0")}`;s.writeFile(o,`jury_export_${m}_${f}.xlsx`)}const Fs=t=>t.reduce((s,r)=>s+V.filter(i=>r[i.id]>0).length,0),Is=t=>{const s=W.length*V.length;return s===0?0:Math.round(Fs(t)/s*100)};function Ps(t){const s={all_submitted:3,group_submitted:2,in_progress:1},r=(t||[]).filter(n=>(n==null?void 0:n.juryName)||(n==null?void 0:n.projectName)||((n==null?void 0:n.total)??0)>0).map(n=>({...n,tsMs:Number.isFinite(n==null?void 0:n.tsMs)?n.tsMs:Ie(n==null?void 0:n.timestamp)})),i=new Map;for(const n of r){const o=String(n.juryName??"").trim().toLowerCase(),l=String(n.juryDept??"").trim().toLowerCase(),m=n.projectId?String(n.projectId).trim():String(n.projectName??"").trim().toLowerCase();if(!o||!m)continue;const f=`${o}__${l}__${m}`,u=i.get(f);if(!u){i.set(f,n);continue}if((n.tsMs||0)>(u.tsMs||0)){i.set(f,n);continue}(n.tsMs||0)===(u.tsMs||0)&&(s[n.status]||0)>(s[u.status]||0)&&i.set(f,n)}return[...i.values()].sort((n,o)=>(o.tsMs||0)-(n.tsMs||0))}function ke({status:t,editingFlag:s,variant:r,icon:i,children:n}){return r||i||n?e.jsxs("span",{className:`status-badge${r?` ${r}`:""}`,children:[i,n]}):s==="editing"?e.jsxs("span",{className:"status-badge editing",children:[e.jsx(Ee,{}),"Editing"]}):t==="all_submitted"?e.jsxs("span",{className:"status-badge submitted",children:[e.jsx(Be,{}),"Submitted"]}):t==="group_submitted"?e.jsxs("span",{className:"status-badge submitted",children:[e.jsx(Be,{}),"Submitted"]}):t==="in_progress"?e.jsxs("span",{className:"status-badge in-progress",children:[e.jsx(Me,{}),"In Progress"]}):null}const Ds="/senior-design-jury/assets/1st-place-medal-cb397e4c.svg",_s="/senior-design-jury/assets/2nd-place-medal-9ec5b4d1.svg",$s="/senior-design-jury/assets/3rd-place-medal-7ad05fc8.svg",Ts=V.map(t=>({id:t.id,label:t.label,shortLabel:t.shortLabel,max:t.max})),De=t=>[{bg:"#F59E0B",fg:"#0B1220",ring:"#FCD34D"},{bg:"#94A3B8",fg:"#0B1220",ring:"#CBD5E1"},{bg:"#B45309",fg:"#FFF7ED",ring:"#FDBA74"}][t]??{bg:"#475569",fg:"#F1F5F9",ring:"#94A3B8"},Rs=[Ds,_s,$s],Bs=t=>{const s=Rs[t];return s?e.jsx("img",{className:"rank-medal",src:s,alt:`${t+1} place medal`}):String(t+1)};function Ws({ranked:t,submittedData:s}){const[r,i]=d.useState(new Set);function n(o){i(l=>{const m=new Set(l);return m.has(o)?m.delete(o):m.add(o),m})}return s.length===0?e.jsx("div",{className:"empty-msg",children:"No submitted evaluations yet."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-note",children:[e.jsx(ft,{}),"Rankings include only ",e.jsx("strong",{children:"completed"})," submissions."]}),e.jsx("div",{className:"rank-list",children:t.map((o,l)=>{var g,M;const m=o.id??l+1,f=`summary-${m}-${l}`,u=r.has(f),c=!!o.desc||((g=o.students)==null?void 0:g.length)>0,h=`summary-group-panel-${f}`;return e.jsxs("div",{className:"rank-card",style:l<3?{background:"#ECFDF5",boxShadow:"0 0 0 1px #BBF7D0, 0 8px 22px rgba(34,197,94,0.18)",border:"1px solid #86EFAC"}:void 0,children:[e.jsx("div",{className:"rank-num",style:{width:52,height:52,borderRadius:999,display:"grid",placeItems:"center",fontSize:l<3?22:18,fontWeight:800,background:l<3?"transparent":De(l).bg,color:De(l).fg,boxShadow:l<3?"0 0 0 5px rgba(34,197,94,0.25)":"0 6px 18px rgba(15,23,42,0.12)",border:l<3?"none":`3px solid ${De(l).ring}`,overflow:"hidden",padding:0},children:Bs(l)}),e.jsxs("div",{className:"rank-info",children:[e.jsxs("div",{className:"group-card-wrap",children:[e.jsxs("button",{className:"group-card-header group-accordion-header",tabIndex:c?0:-1,"aria-expanded":u,"aria-controls":h,type:"button",onClick:()=>{c&&n(f)},onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&c&&(y.preventDefault(),n(f))},style:{cursor:c?"pointer":"default"},children:[e.jsxs("div",{className:"group-card-title",children:[e.jsxs("span",{className:"group-card-name",children:["Group ",m]}),c&&e.jsx("span",{className:`group-accordion-chevron${u?" open":""}`,children:"â–¾"})]}),e.jsxs("div",{className:"group-card-score",children:[e.jsx("small",{className:"group-card-score-label",children:"avg."}),e.jsx("span",{className:"group-card-score-value",children:o.totalAvg.toFixed(2)})]})]}),e.jsx("div",{id:h,className:`group-accordion-panel${u?" open":""}`,children:e.jsxs("div",{className:"group-accordion-panel-inner group-card-accordion-inner",children:[o.desc&&e.jsx("div",{className:"group-card-desc",children:o.desc}),((M=o.students)==null?void 0:M.length)>0&&e.jsxs("div",{className:"group-card-students",children:["ðŸ‘¥ ",o.students.join(" Â· ")]})]})}),e.jsxs("span",{className:"rank-eval-count",children:["(",o.count," evaluation",o.count!==1?"s":"",")"]})]}),e.jsx("div",{className:"rank-bars",children:Ts.map(y=>e.jsxs("div",{className:"mini-bar-row",children:[e.jsx("span",{className:"mini-label",children:y.shortLabel||y.label}),e.jsx("div",{className:"mini-bar-track",children:e.jsx("div",{className:"mini-bar-fill",style:{width:`${(o.avg[y.id]||0)/y.max*100}%`}})}),e.jsx("span",{className:"mini-val",children:(o.avg[y.id]||0).toFixed(2)})]},y.id))})]})]},o.id??`${o.name}-${l}`)})})]})}const zs=["9.1","9.2","1.2","2","3.1","3.2","8.1","8.2"],X=V.map(t=>({key:t.id,code:t.mudek.join("/"),label:t.shortLabel,max:t.max,color:t.color}));function yt(t){if(t.length<2)return 0;const s=t.reduce((r,i)=>r+i,0)/t.length;return Math.sqrt(t.reduce((r,i)=>r+(i-s)**2,0)/t.length)}function Ke(t){return t.length?t.reduce((s,r)=>s+r,0)/t.length:0}function _e(t,s){if(!t.length)return 0;const r=(t.length-1)*s,i=Math.floor(r),n=r-i;return t[i+1]===void 0?t[i]:t[i]+n*(t[i+1]-t[i])}function Os(t,s){return t.map(r=>Number(r[s])).filter(r=>Number.isFinite(r))}function xe({msg:t}){return e.jsx("div",{className:"chart-empty",children:t||"Not enough data yet."})}function Gs({codes:t}){return e.jsxs("table",{className:"mudek-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"mudek-table-code",children:"Code"}),e.jsx("th",{children:"Outcome (EN) â€” hover for Turkish"})]})}),e.jsx("tbody",{children:t.map(s=>{const r=Ht[s];return r?e.jsxs("tr",{title:r.tr,children:[e.jsx("td",{className:"mudek-table-code-cell",children:s}),e.jsx("td",{children:r.en})]},s):null})})]})}function Ks(){return e.jsx("div",{className:"mudek-rubric-list",children:V.map(t=>{const s=Kt;return e.jsxs("div",{className:"mudek-rubric-criterion",children:[e.jsxs("div",{className:"mudek-rubric-criterion-title",children:[t.label,e.jsxs("span",{className:"mudek-rubric-criterion-meta",children:["(",t.mudek.join(", "),") Â· max ",t.max," pts"]})]}),e.jsxs("table",{className:"mudek-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Range"}),e.jsx("th",{children:"Level"}),e.jsx("th",{children:"Descriptor"})]})}),e.jsx("tbody",{children:t.rubric.map(r=>{const i=s[r.level]||{};return e.jsxs("tr",{children:[e.jsx("td",{children:r.range}),e.jsx("td",{children:e.jsx("span",{className:"mudek-band-badge",style:{background:i.bg,color:i.text},children:r.level})}),e.jsx("td",{children:r.desc})]},r.level)})})]})]},t.id)})})}function Hs({outcomeCodes:t=zs}){const[s,r]=d.useState(!1),[i,n]=d.useState("outcomes"),o=d.useRef(null),l=d.useRef(null);return d.useEffect(()=>{if(!s)return;function m(f){o.current&&!o.current.contains(f.target)&&r(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[s]),d.useEffect(()=>{if(!s)return;function m(f){var u;f.key==="Escape"&&(r(!1),(u=l.current)==null||u.focus())}return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[s]),e.jsxs("div",{className:"mudek-badge-wrap",ref:o,children:[e.jsxs("button",{ref:l,className:"mudek-badge",onClick:()=>r(m=>!m),"aria-label":"MÃœDEK outcome mapping","aria-expanded":s,children:[e.jsx(cs,{}),e.jsx("span",{children:"MÃœDEK"}),e.jsx("span",{className:`mudek-chevron${s?" open":""}`,"aria-hidden":"true",children:e.jsx(gt,{})})]}),s&&e.jsxs("div",{className:"mudek-dropdown",role:"dialog","aria-label":"MÃœDEK outcome mapping",children:[e.jsxs("div",{className:"mudek-dropdown-header",children:[e.jsx("span",{children:"MÃœDEK Outcome Mapping"}),e.jsx("button",{className:"mudek-dropdown-close",onClick:()=>{var m;r(!1),(m=l.current)==null||m.focus()},"aria-label":"Close",children:"âœ•"})]}),e.jsxs("div",{className:"mudek-tabs",children:[e.jsx("button",{className:`mudek-tab-btn${i==="outcomes"?" active":""}`,onClick:()=>n("outcomes"),children:"MÃœDEK Outcomes"}),e.jsx("button",{className:`mudek-tab-btn${i==="rubric"?" active":""}`,onClick:()=>n("rubric"),children:"Rubric Bands"})]}),e.jsxs("div",{className:"mudek-dropdown-body",children:[i==="outcomes"&&e.jsx(Gs,{codes:t}),i==="rubric"&&e.jsx(Ks,{})]}),e.jsx("div",{className:"mudek-dropdown-footer",children:"â„¹ This chart provides evidence for the outcomes above."})]})]})}function Js({data:t}){const s=t||[];if(!s.length)return e.jsx(xe,{});const r=X.map(x=>{const L=Os(s,x.key),v=L.length?Ke(L):0,k=x.max>0?v/x.max*100:0,b=L.length>1?yt(L)/x.max*100:0;return{...x,avgRaw:v,pct:k,sd:b,n:L.length}}),i=38,n=22,o=34,l=8,m=22,f=20,u=160,c=r.length,h=o+c*i+(c-1)*n+l,g=m+u+f,M=x=>o+x*(i+n),y=x=>M(x)+i/2,C=x=>m+u*(1-Math.max(0,Math.min(100,x))/100);return e.jsxs("div",{className:"chart-card chart-compact-equal chart-fill-card",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Programme-Level Outcome Averages"}),e.jsx("div",{className:"chart-note",children:"Grand mean Â±1 SD normalized score per outcome across all groups and jurors."})]})}),e.jsx("div",{className:"chart-svg-fill",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:`0 0 ${h} ${g}`,preserveAspectRatio:"xMidYMid meet",style:{width:"100%",height:"100%",display:"block"},children:[[0,25,50,75,100].map(x=>{const L=C(x);return e.jsxs("g",{children:[e.jsx("line",{x1:o,y1:L,x2:h-l,y2:L,stroke:x===0?"#cbd5e1":"#e2e8f0",strokeWidth:x===0?1.2:1}),e.jsx("text",{x:o-4,y:L+3.5,textAnchor:"end",fontSize:"7",fill:"#94a3b8",children:x})]},x)}),e.jsx("text",{x:"10",y:m+u/2,transform:`rotate(-90 10 ${m+u/2})`,fontSize:"8",fill:"#94a3b8",textAnchor:"middle",children:"Normalized (%)"}),r.map((x,L)=>{const v=M(L),k=y(L),b=C(x.pct),S=u-(b-m),p=C(x.pct+x.sd),j=C(Math.max(0,x.pct-x.sd));return e.jsxs("g",{children:[e.jsxs("title",{children:[x.label," (",x.code,")",`
`,"Grand mean: ",x.pct.toFixed(1),"%",`
`,"SD: Â±",x.sd.toFixed(1),"%",`
`,"N evaluations: ",x.n]}),e.jsx("rect",{x:v,y:m,width:i,height:u,rx:"3",fill:"#f1f5f9"}),S>0&&e.jsx("rect",{x:v,y:b,width:i,height:S,rx:"3",fill:x.color}),x.sd>0&&e.jsxs(e.Fragment,{children:[e.jsxs("g",{stroke:"#ffffff",strokeWidth:"3.2",strokeLinecap:"round",opacity:"0.65",children:[e.jsx("line",{x1:k,y1:p,x2:k,y2:j}),e.jsx("line",{x1:k-7,y1:p,x2:k+7,y2:p}),e.jsx("line",{x1:k-7,y1:j,x2:k+7,y2:j})]}),e.jsxs("g",{stroke:"#6b7280",strokeWidth:"1.2",strokeLinecap:"round",opacity:"0.75",children:[e.jsx("line",{x1:k,y1:p,x2:k,y2:j}),e.jsx("line",{x1:k-7,y1:p,x2:k+7,y2:p}),e.jsx("line",{x1:k-7,y1:j,x2:k+7,y2:j}),e.jsx("circle",{cx:k,cy:p,r:"1.6",fill:"#6b7280",stroke:"none"}),e.jsx("circle",{cx:k,cy:j,r:"1.6",fill:"#6b7280",stroke:"none"})]})]}),e.jsx("text",{x:k,y:b+S/2+3,textAnchor:"middle",fontSize:"9",fill:"#ffffff",stroke:"rgba(15,23,42,0.35)",strokeWidth:"0.8",fontWeight:"700",style:{paintOrder:"stroke"},children:x.pct.toFixed(1)}),e.jsx("text",{x:k,y:m+u+13,textAnchor:"middle",fontSize:"8.5",fill:"#374151",fontWeight:"500",children:x.label})]},x.key)})]})})]})}function qs({stats:t}){const s=t.filter(h=>h.count>0);if(!s.length)return e.jsx(xe,{});const r=14,i=4,n=X.length*(r+i)+12,o=8,l=130,m=28,f=s.length*n+m+10,u=l+o,c=o+(l-Je/100*l);return e.jsxs("div",{className:"chart-card chart-compact-equal",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Outcome Achievement by Group"}),e.jsx("div",{className:"chart-note",children:"Compares each group's normalized score across all four MÃœDEK-mapped criteria."})]})}),e.jsx("div",{className:"chart-svg-wrap",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:`0 0 ${f} ${u+36}`,style:{width:"100%",height:"auto",display:"block"},children:[e.jsx("text",{x:"10",y:o+l/2,transform:`rotate(-90 10 ${o+l/2})`,fontSize:"8",fill:"#94a3b8",textAnchor:"middle",children:"Normalized (%)"}),[0,25,50,75,100].map(h=>{const g=o+(l-h/100*l);return e.jsxs("g",{children:[e.jsx("line",{x1:m,y1:g,x2:f,y2:g,stroke:"#e2e8f0",strokeWidth:"1"}),e.jsx("text",{x:m-4,y:g+4,fontSize:"8",textAnchor:"end",fill:"#94a3b8",children:h})]},h)}),e.jsx("g",{children:e.jsx("line",{x1:m,y1:c,x2:f,y2:c,stroke:"#6B7280",strokeWidth:"1",strokeDasharray:"3,3"})}),s.map((h,g)=>{const M=m+g*n+4;return e.jsxs("g",{children:[X.map((y,C)=>{const x=(h.avg[y.key]||0)/y.max*100,L=x/100*l,v=M+C*(r+i);return e.jsxs("g",{children:[e.jsxs("title",{children:[h.name," Â· ",y.label,": ",x.toFixed(1),"%"]}),e.jsx("rect",{x:v,y:o+(l-L),width:r,height:L,fill:y.color,rx:"2",opacity:"0.85"})]},y.key)}),e.jsx("text",{x:M+X.length*(r+i)/2-i/2,y:o+l+14,fontSize:"9",textAnchor:"middle",fill:"#475569",fontWeight:"600",children:h.name})]},h.id)})]})}),e.jsxs("div",{className:"chart-legend",children:[X.map(h=>e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot",style:{background:h.color}}),h.label]},h.key)),e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-line","aria-hidden":"true"}),"Reference (",Je,"%)"]})]})]})}function Us({stats:t}){var L;const s=t.filter(v=>v.count>0),[r,i]=d.useState(((L=s[0])==null?void 0:L.id)??null);if(!s.length)return e.jsx(xe,{});const n=s.find(v=>v.id===(r??s[0].id))??s[0],o=X.length,l=130,m=120,f=82,u=v=>Math.PI*2*v/o-Math.PI/2,c=(v,k)=>({x:l+k*Math.cos(u(v)),y:m+k*Math.sin(u(v))}),h=X.map(v=>(n.avg[v.key]||0)/v.max*100),g=X.map(v=>{const k=s.map(b=>(b.avg[v.key]||0)/v.max*100);return Ke(k)}),M=h.map((v,k)=>c(k,v/100*f)),y=g.map((v,k)=>c(k,v/100*f)),C=M.map((v,k)=>`${k===0?"M":"L"}${v.x.toFixed(1)},${v.y.toFixed(1)}`).join(" ")+" Z",x=y.map((v,k)=>`${k===0?"M":"L"}${v.x.toFixed(1)},${v.y.toFixed(1)}`).join(" ")+" Z";return e.jsxs("div",{className:"chart-card chart-fill-card",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Competency Profile per Group"}),e.jsx("div",{className:"chart-note",children:"Shows whether a group's competency development is balanced or skewed across all four outcomes."})]})}),s.length>1&&e.jsx("select",{className:"radar-group-select",value:r??s[0].id,onChange:v=>i(Number(v.target.value)),children:s.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))}),e.jsx("div",{className:"chart-svg-fill",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:"0 0 260 240",preserveAspectRatio:"xMidYMid meet",style:{width:"100%",maxWidth:280,height:"100%",display:"block"},children:[[.25,.5,.75,1].map(v=>{const b=X.map((S,p)=>c(p,v*f)).map((S,p)=>`${p===0?"M":"L"}${S.x.toFixed(1)},${S.y.toFixed(1)}`).join(" ")+" Z";return e.jsx("path",{d:b,fill:"none",stroke:"#e2e8f0",strokeWidth:"1"},v)}),[.25,.5,.75,1].map(v=>{const k=c(0,v*f);return e.jsxs("text",{x:k.x.toFixed(1),y:(k.y-6).toFixed(1),textAnchor:"middle",fontSize:"8",fill:"#94a3b8",children:[Math.round(v*100),"%"]},`tick-${v}`)}),X.map((v,k)=>{const b=c(k,f);return e.jsx("line",{x1:l,y1:m,x2:b.x.toFixed(1),y2:b.y.toFixed(1),stroke:"#cbd5e1",strokeWidth:"1"},k)}),e.jsx("path",{d:x,fill:"none",stroke:"#9CA3AF",strokeWidth:"1.5",strokeDasharray:"4,3"}),e.jsx("path",{d:C,fill:"rgba(59,130,246,0.18)",stroke:"#3b82f6",strokeWidth:"2.2",strokeLinejoin:"round"}),M.map((v,k)=>e.jsxs("g",{children:[e.jsxs("title",{children:[X[k].label,": ",h[k].toFixed(1),"%",`
`,"Cohort avg: ",g[k].toFixed(1),"%"]}),e.jsx("circle",{cx:v.x.toFixed(1),cy:v.y.toFixed(1),r:"3.5",fill:"#3b82f6",stroke:"#fff",strokeWidth:"1.2"})]},k)),X.map((v,k)=>{const b=c(k,f+16);return e.jsx("text",{x:b.x.toFixed(1),y:b.y.toFixed(1),textAnchor:"middle",dominantBaseline:"middle",fontSize:"9",fill:"#334155",fontWeight:"700",children:v.label},v.key)})]})}),e.jsxs("div",{className:"chart-legend",children:[e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot",style:{background:"#3b82f6"}}),n.name]}),e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot",style:{background:"#9CA3AF"}}),"Cohort Average (dashed)"]})]})]})}function Ys({data:t}){const s=t||[];if(!s.length)return e.jsx(xe,{});const r=X.map(j=>{const I=s.map(U=>Number(U[j.key])).filter(U=>Number.isFinite(U)&&U>0).map(U=>U/j.max*100).sort((U,se)=>U-se);if(!I.length)return{...j,empty:!0};const z=_e(I,.25),K=_e(I,.5),A=_e(I,.75),$=A-z,H=z-1.5*$,O=A+1.5*$,Q=I.find(U=>U>=H)??I[0],J=[...I].reverse().find(U=>U<=O)??I[I.length-1],q=I.filter(U=>U<H||U>O);return{...j,q1:z,med:K,q3:A,whiskerMin:Q,whiskerMax:J,outliers:q}}),i=320,n=36,o=10,l=6,m=160,f=m+l+20,u=(i-n-o)/r.length,c=18,h=r.flatMap(j=>j.empty?[]:[j.whiskerMin,j.whiskerMax,...j.outliers]),g=h.length?Math.min(...h):0,M=h.length?Math.max(...h):100,y=Math.max(5,M-g),C=Math.min(10,y*.12),x=Math.max(0,g-C),L=Math.min(100,M+C),v=j=>l+(m-(j-x)/Math.max(1,L-x)*m),k=y<=10?2:y<=20?5:y<=40?10:y<=70?20:25,b=Math.ceil(x/k)*k,S=Math.floor(L/k)*k,p=[];for(let j=b;j<=S;j+=k)p.push(j);return p.length<2&&(p.length=0,p.push(Math.round(x),Math.round((x+L)/2),Math.round(L))),e.jsxs("div",{className:"chart-card chart-equal-bottom",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Score Distribution by Criterion"}),e.jsx("div",{className:"chart-note",children:"Reveals inter-juror spread for each criterion â€” evidence of measurement reliability."})]})}),e.jsx("div",{className:"chart-svg-fill heatmap-svg-fill",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:`0 0 ${i} ${f}`,style:{width:"100%",height:"100%",display:"block"},children:[p.map(j=>{const I=v(j);return e.jsxs("g",{children:[e.jsx("line",{x1:n,y1:I,x2:i-o,y2:I,stroke:"#e2e8f0",strokeWidth:"1"}),e.jsx("text",{x:n-4,y:I+4,fontSize:"8",textAnchor:"end",fill:"#94a3b8",children:Math.round(j)})]},j)}),e.jsx("line",{x1:n,y1:l,x2:n,y2:l+m,stroke:"#e2e8f0",strokeWidth:"1"}),e.jsx("text",{x:"10",y:l+m/2,transform:`rotate(-90 10 ${l+m/2})`,fontSize:"8",fill:"#94a3b8",textAnchor:"middle",children:"Normalized (%)"}),r.map((j,I)=>{const z=n+I*u+u/2;if(j.empty)return e.jsx("text",{x:z,y:l+m+16,fontSize:"9",textAnchor:"middle",fill:"#94a3b8",children:j.label},j.key);const K=v(j.q1),A=v(j.q3),$=v(j.med);return e.jsxs("g",{children:[e.jsx("rect",{x:z-c/2,y:A,width:c,height:Math.max(2,K-A),fill:"rgba(59,130,246,0.18)",stroke:j.color,strokeWidth:"1.6"}),e.jsx("line",{x1:z-c/2,y1:$,x2:z+c/2,y2:$,stroke:j.color,strokeWidth:"2.2"}),e.jsx("text",{x:z,y:l+m+16,fontSize:"9",textAnchor:"middle",fill:"#475569",fontWeight:"600",children:j.label})]},j.key)})]})}),e.jsxs("div",{className:"chart-legend boxplot-legend",children:[e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"boxplot-legend-box"}),"IQR band (Q1â€“Q3)"]}),e.jsxs("span",{className:"legend-item",children:[e.jsx("span",{className:"boxplot-legend-median"}),"Median"]})]})]})}function Vs({stats:t,data:s}){const r=t.filter(g=>g.count>0),i=s||[];if(!r.length||!i.length)return e.jsx(xe,{});const n=X.map(g=>r.map(M=>{const y=i.filter(L=>L.projectId===M.id).map(L=>Number(L[g.key])).filter(L=>Number.isFinite(L));if(y.length<2)return{cv:null,m:null,sd:null,n:y.length};const C=Ke(y);if(!C)return{cv:null,m:C,sd:null,n:y.length};const x=yt(y);return{cv:x/C*100,m:C,sd:x,n:y.length}})),o=g=>g===null?{fill:"#f1f5f9",text:"#94a3b8"}:g<10?{fill:"#dcfce7",text:"#166534"}:g<15?{fill:"#bbf7d0",text:"#166534"}:g<25?{fill:"#fef08a",text:"#92400e"}:{fill:"#fecaca",text:"#991b1b"},l=100,m=26,f=96,u=48,c=l+r.length*f,h=m+X.length*u+10;return e.jsxs("div",{className:"chart-card chart-fill-card",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Juror Consistency Heatmap"}),e.jsx("div",{className:"chart-note",children:"Identifies which group Ã— criterion combinations have poor juror agreement, guiding rubric improvement."})]})}),e.jsxs("div",{className:"cv-formula-block",children:[e.jsx("span",{className:"cv-formula-pill","aria-label":"CV equals sigma divided by x bar times 100",children:e.jsx("math",{xmlns:"http://www.w3.org/1998/Math/MathML",className:"cv-formula-math",children:e.jsxs("mrow",{children:[e.jsx("mi",{children:"CV"}),e.jsx("mo",{children:"="}),e.jsxs("mrow",{children:[e.jsx("mo",{children:"("}),e.jsxs("mfrac",{children:[e.jsx("mi",{children:"Ïƒ"}),e.jsx("mi",{children:"Î¼"})]}),e.jsx("mo",{children:")"})]}),e.jsx("mo",{children:"Ã—"}),e.jsx("mn",{children:"100"})]})})}),e.jsx("span",{className:"cv-formula-legend",children:"Ïƒ = std. deviation Â Â·Â  Î¼ = mean score Â Â·Â  CV = juror disagreement %"})]}),e.jsx("div",{className:"chart-svg-fill heatmap-svg-fill",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:`0 0 ${c} ${h}`,style:{width:"100%",maxWidth:c,height:"100%",display:"block"},children:[r.map((g,M)=>e.jsx("text",{x:l+M*f+f/2,y:16,textAnchor:"middle",fontSize:"11",fill:"#475569",fontWeight:"600",children:g.name},g.id)),X.map((g,M)=>e.jsxs("g",{children:[e.jsx("text",{x:l-10,y:m+M*u+u/2+6,textAnchor:"end",fontSize:"12",fill:"#475569",fontWeight:"600",children:g.label}),r.map((y,C)=>{const x=n[M][C],L=x.cv,v=l+C*f,k=m+M*u,b=o(L),S=[`${y.name} Â· ${g.label}`,`CV: ${L===null?"N/A":Math.round(L)+"%"}`,x.m!==null?`Mean: ${(x.m/g.max*100).toFixed(1)}%`:"",x.sd!==null?`SD: ${x.sd.toFixed(2)}`:"",`N jurors: ${x.n}`].filter(Boolean).join(`
`);return e.jsxs("g",{children:[e.jsx("title",{children:S}),e.jsx("rect",{x:v+3,y:k+3,width:f-6,height:u-6,rx:"12",fill:b.fill,stroke:"rgba(148,163,184,0.25)"}),e.jsx("text",{x:v+f/2,y:k+u/2+6,textAnchor:"middle",fontSize:"12",fill:b.text,fontWeight:"700",children:L===null?"N/A":`${Math.round(L)}%`})]},`${g.key}-${y.id}`)})]},g.key))]})}),e.jsxs("div",{className:"heatmap-legend",children:[e.jsxs("span",{className:"heatmap-legend-item",children:[e.jsx("span",{className:"heatmap-legend-swatch",style:{background:"#dcfce7",borderColor:"#bbf7d0"}}),"<10% CV (excellent)"]}),e.jsxs("span",{className:"heatmap-legend-item",children:[e.jsx("span",{className:"heatmap-legend-swatch",style:{background:"#bbf7d0",borderColor:"#86efac"}}),"10â€“15% CV"]}),e.jsxs("span",{className:"heatmap-legend-item",children:[e.jsx("span",{className:"heatmap-legend-swatch",style:{background:"#fef08a",borderColor:"#fde047"}}),"15â€“25% CV"]}),e.jsxs("span",{className:"heatmap-legend-item",children:[e.jsx("span",{className:"heatmap-legend-swatch",style:{background:"#fecaca",borderColor:"#fca5a5"}}),">25% CV (poor)"]})]})]})}function Qs({data:t}){const s=t||[];if(!s.length)return e.jsx(xe,{});const r=[{key:"insufficient",label:"Insufficient",color:"#ef4444"},{key:"developing",label:"Developing",color:"#f59e0b"},{key:"good",label:"Good",color:"#a3e635"},{key:"excellent",label:"Excellent",color:"#22c55e"}],i=(x,L)=>{if(!Number.isFinite(x))return null;for(const v of L)if(x>=v.min&&x<=v.max)return v.level.toLowerCase();return null},n=X.map(x=>{const L=V.find(p=>p.id===x.key),v=s.map(p=>Number(p[x.key])).filter(p=>Number.isFinite(p)),k={excellent:0,good:0,developing:0,insufficient:0};v.forEach(p=>{const j=i(p,L.rubric);j&&(k[j]+=1)});const b=v.length||1,S=r.map(p=>({...p,pct:k[p.key]/b*100,count:k[p.key]}));return{...x,pct:S,total:v.length}}),o=r.map(x=>({...x,anyPresent:n.some(L=>{var v;return((v=L.pct.find(k=>k.key===x.key))==null?void 0:v.pct)>0})})),l=340,m=32,f=10,u=8,c=28,h=180,g=u+h+c,M=(l-m-f)/n.length,y=Math.min(44,M*.65),C=x=>x/100*h;return e.jsxs("div",{className:"chart-card chart-equal-bottom",children:[e.jsx("div",{className:"chart-title-row",children:e.jsxs("div",{children:[e.jsx("div",{className:"chart-title",children:"Achievement Level Distribution"}),e.jsx("div",{className:"chart-note",children:"% of evaluations per rubric band â€” directly maps to MÃœDEK continuous improvement evidence."})]})}),e.jsx("div",{className:"chart-svg-fill rubric-svg-fill",children:e.jsxs("svg",{className:"chart-main-svg",viewBox:`0 0 ${l} ${g}`,style:{width:"100%",height:"auto",display:"block"},children:[[0,25,50,75,100].map(x=>{const L=u+h-C(x);return e.jsxs("g",{children:[e.jsx("line",{x1:m,y1:L,x2:l-f,y2:L,stroke:"#e2e8f0",strokeWidth:"1"}),e.jsxs("text",{x:m-4,y:L+4,fontSize:"8",textAnchor:"end",fill:"#94a3b8",children:[x,"%"]})]},x)}),n.map((x,L)=>{const v=m+L*M+M/2,k=v-y/2;let b=0;return e.jsxs("g",{children:[x.pct.map(S=>{if(S.pct<=0)return null;const p=C(S.pct),j=u+h-b-p;b+=p;const I=p>=16;return e.jsxs("g",{children:[e.jsxs("title",{children:[x.label," Â· ",S.label,`
`,"Count: ",S.count," evaluation",S.count!==1?"s":"",`
`,"Share: ",S.pct.toFixed(0),"%"]}),e.jsx("rect",{x:k,y:j,width:y,height:p,fill:S.color}),I&&e.jsxs("text",{x:v,y:j+p/2+4,textAnchor:"middle",fontSize:"9",fill:"#fff",fontWeight:"700",children:[S.pct.toFixed(0),"%"]})]},S.key)}),e.jsx("text",{x:v,y:u+h+16,textAnchor:"middle",fontSize:"9",fill:"#475569",fontWeight:"600",children:x.label})]},x.key)})]})}),e.jsx("div",{className:"chart-legend rubric-legend",children:[...o].reverse().map(x=>e.jsxs("span",{className:"legend-item",style:x.anyPresent?void 0:{opacity:.35,textDecoration:"line-through"},children:[e.jsx("span",{className:"legend-dot",style:{background:x.color}}),x.label]},x.key))})]})}function Xs(t){return t?t.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(","," Â·"):"â€”"}function Zs(){return e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"dashboard-skeleton-row",children:e.jsx("div",{className:"skeleton-card skeleton-wide"})}),e.jsxs("div",{className:"dashboard-skeleton-row",children:[e.jsx("div",{className:"skeleton-card"}),e.jsx("div",{className:"skeleton-card"})]}),e.jsx("div",{className:"dashboard-skeleton-row",children:e.jsx("div",{className:"skeleton-card skeleton-wide"})}),e.jsxs("div",{className:"dashboard-skeleton-row",children:[e.jsx("div",{className:"skeleton-card"}),e.jsx("div",{className:"skeleton-card"})]})]})}function en(){return e.jsxs("div",{className:"dashboard-state-card",children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#FCA5A5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("p",{className:"dashboard-state-title",children:"Could not load data"}),e.jsx("span",{className:"dashboard-state-sub",children:"Check your connection and refresh the page."})]})}function tn(){return e.jsxs("div",{className:"dashboard-state-card",children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#D1D5DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),e.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),e.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),e.jsx("p",{className:"dashboard-state-title",children:"No data available"}),e.jsx("span",{className:"dashboard-state-sub",children:"Evaluations will appear here once jurors submit their scores."})]})}function sn({dashboardStats:t,submittedData:s,lastRefresh:r,loading:i,error:n}){const o=d.useRef(null),[l,m]=d.useState(!1),f=d.useRef(null);async function u(){if(l||!o.current)return;m(!0);const h=o.current,g=h.querySelector(".dashboard-toolbar"),M=h.querySelector(".print-header"),y=h.querySelectorAll(".mudek-badge-wrap"),C=(g==null?void 0:g.style.display)??"",x=(M==null?void 0:M.style.display)??"",L=[];y.forEach(b=>L.push(b.style.visibility??""));const v=()=>{g&&(g.style.display=C),M&&(M.style.display=x),y.forEach((b,S)=>{b.style.visibility=L[S]||""}),h.classList.remove("print-mode"),m(!1),f.current=null};f.current=v,g&&(g.style.display="none"),M&&(M.style.display="block"),y.forEach(b=>b.style.visibility="hidden"),h.classList.add("print-mode");const k=()=>v();window.addEventListener("afterprint",k,{once:!0}),requestAnimationFrame(()=>{setTimeout(()=>{window.print()},50)})}d.useEffect(()=>()=>{f.current&&f.current()},[]);const c=Xs(r);return i?e.jsx("div",{className:"dashboard-print-wrap",children:e.jsx(Zs,{})}):n?e.jsx("div",{className:"dashboard-print-wrap",children:e.jsx(en,{})}):!s||s.length===0?e.jsx("div",{className:"dashboard-print-wrap",children:e.jsx(tn,{})}):e.jsxs("div",{className:"dashboard-print-wrap",ref:o,children:[e.jsxs("div",{className:"print-header",children:[e.jsx("div",{className:"print-header-title",children:oe.appTitle}),e.jsxs("div",{className:"print-header-sub",children:[oe.courseName," â€” ",oe.university]}),e.jsxs("div",{className:"print-header-meta",children:["Dashboard Report Â Â·Â  ",c,"Â Â·Â  ",s.length," final submission",s.length!==1?"s":"","Â Â·Â  ",t.length," group",t.length!==1?"s":""]})]}),e.jsxs("div",{className:"dashboard-toolbar no-print",children:[e.jsx("div",{className:"dashboard-toolbar-left",children:e.jsx(Hs,{})}),e.jsxs("button",{className:"pdf-export-btn",onClick:u,disabled:l,children:[e.jsx(mt,{}),l?"Preparing PDFâ€¦":"Export PDF"]})]}),e.jsx("div",{className:"dashboard-grid",children:e.jsx("div",{className:"chart-span-2",id:"chart-1",children:e.jsx(qs,{stats:t})})}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsx("div",{id:"chart-2",children:e.jsx(Js,{data:s})}),e.jsx("div",{id:"chart-3",children:e.jsx(Us,{stats:t})})]}),e.jsx("div",{className:"dashboard-grid",children:e.jsx("div",{className:"chart-span-2",id:"chart-4",children:e.jsx(Vs,{stats:t,data:s})})}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsx("div",{id:"chart-5",children:e.jsx(Ys,{data:s})}),e.jsx("div",{id:"chart-6",children:e.jsx(Qs,{data:s})})]})]})}const nt=W.map((t,s)=>typeof t=="string"?{id:s+1,name:t,desc:"",students:[]}:{id:t.id??s+1,name:t.name??`Group ${s+1}`,desc:t.desc??"",students:t.students??[]});function ge(t){if(t===""||t===null||t===void 0||typeof t=="string"&&t.trim()==="")return"";const s=Number(t);return Number.isFinite(s)?s:""}const nn=[{key:"in_progress",label:"In Progress"},{key:"editing",label:"Editing"},{key:"submitted",label:"Submitted"}],rn=[{key:"technical",label:"Technical /30"},{key:"design",label:"Written /30"},{key:"delivery",label:"Oral /30"},{key:"teamwork",label:"Teamwork /10"},{key:"total",label:"Total"}];function rt(t){return t.jurorId?t.jurorId:`${(t.juryName||"").trim().toLowerCase()}__${(t.juryDept||"").trim().toLowerCase()}`}function an({open:t,anchorRect:s,onClose:r,className:i,contentKey:n,mode:o="anchor",children:l}){const m=d.useRef(null),[f,u]=d.useState({left:0,top:0,visibility:"hidden"});return d.useLayoutEffect(()=>{if(!t||!m.current)return;const c=m.current,h=()=>{if(o==="center"){u({left:"50%",top:"50%",transform:"translate(-50%, -50%)",visibility:"visible"});return}if(!s)return;const g=8,M=c.offsetWidth,y=c.offsetHeight,C=window.innerWidth,x=window.innerHeight;let L=s.left;L=Math.min(L,C-M-g),L=Math.max(g,L);let v=s.bottom+6;if(v+y+g>x){const k=s.top-y-6;k>=g?v=k:v=Math.max(g,x-y-g)}u({left:L,top:v,transform:"none",visibility:"visible"})};return h(),window.addEventListener("resize",h),window.addEventListener("orientationchange",h),()=>{window.removeEventListener("resize",h),window.removeEventListener("orientationchange",h)}},[t,s,n,o]),!t||o!=="center"&&!s?null:at.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"filter-overlay",onClick:r}),e.jsx("div",{ref:m,className:i,style:f,role:"dialog","aria-modal":"true",onClick:c=>c.stopPropagation(),onPointerDown:c=>c.stopPropagation(),children:l})]}),document.body)}function on({data:t,jurors:s}){const[r,i]=d.useState("ALL"),[n,o]=d.useState("ALL"),[l,m]=d.useState("ALL"),[f,u]=d.useState(new Set),[c,h]=d.useState(""),[g,M]=d.useState(""),[y,C]=d.useState(""),[x,L]=d.useState("tsMs"),[v,k]=d.useState("desc"),[b,S]=d.useState(null),[p,j]=d.useState(null),[I,z]=d.useState(()=>typeof window<"u"&&window.matchMedia("(max-width: 480px)").matches),K=d.useMemo(()=>nt.map(a=>({id:a.id,label:`Group ${a.id}`,name:a.name})).sort((a,F)=>a.id-F.id),[]),A=d.useMemo(()=>{const a=new Map;return s.forEach(F=>{const w=String((F==null?void 0:F.dept)??"").trim();w&&a.set(w.toLowerCase(),w)}),Array.from(a.entries()).sort((F,w)=>F[1].localeCompare(w[1])).map(([F,w])=>({key:F,label:w}))},[s]);d.useEffect(()=>{if(!I||b!=="timestamp")return;const a=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=a}},[b,I]),d.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia("(max-width: 480px)"),F=()=>z(a.matches);return F(),a.addEventListener?a.addEventListener("change",F):a.addListener(F),()=>{a.addEventListener?a.removeEventListener("change",F):a.removeListener(F)}},[]);const $=d.useMemo(()=>{let a=0;return r!=="ALL"&&(a+=1),n!=="ALL"&&(a+=1),l!=="ALL"&&(a+=1),f.size>0&&(a+=1),(c||g)&&(a+=1),y&&(a+=1),a},[r,n,l,f,c,g,y]),H=$>0;function O(){i("ALL"),o("ALL"),m("ALL"),u(new Set),h(""),M(""),C(""),L("tsMs"),k("desc"),S(null),j(null)}function Q(a){u(F=>{const w=new Set(F);return w.has(a)?w.delete(a):w.add(a),w})}function J(){S(null),j(null)}function q(a,F){var D,G;const w=(G=(D=F==null?void 0:F.currentTarget)==null?void 0:D.getBoundingClientRect)==null?void 0:G.call(D);S(te=>{const Z=te===a?null:a;return Z&&w&&j(w),Z||j(null),Z})}function U(a){return a===""||a===null||a===void 0||typeof a=="string"&&a.trim()===""?!0:typeof a=="number"?!Number.isFinite(a):!1}const se=d.useMemo(()=>{const a=c?new Date(c).getTime():0,F=g?new Date(g+"T23:59:59").getTime():1/0;let w=t.slice();if(r!=="ALL"&&(w=w.filter(D=>rt(D)===r)),l!=="ALL"&&(w=w.filter(D=>String(D.projectId)===l)),n!=="ALL"){const D=n.toLowerCase();w=w.filter(G=>String(G.juryDept??"").trim().toLowerCase()===D)}if(f.size>0&&(w=w.filter(D=>{const G=D.editingFlag==="editing"||D.status==="editing",te=D.status==="group_submitted"||D.status==="all_submitted",Z=D.status==="in_progress";return!!(f.has("editing")&&G||f.has("submitted")&&te||f.has("in_progress")&&Z)})),(c||g)&&(w=w.filter(D=>{const G=D.tsMs||Ie(D.timestamp);return G>=a&&G<=F})),y){const D=y.toLowerCase();w=w.filter(G=>(G.comments||"").toLowerCase().includes(D))}return w.sort((D,G)=>{const te=D[x],Z=G[x],ae=U(te),Y=U(Z);return ae&&Y?0:ae?1:Y?-1:v==="asc"?Ne(te,Z):Ne(Z,te)}),w},[t,r,l,n,f,c,g,y,x,v]);function ne(a){x===a?k(F=>F==="asc"?"desc":"asc"):(L(a),k("desc"))}const le=a=>x!==a?e.jsx(ht,{}):v==="asc"?e.jsx(pt,{}):e.jsx(xt,{}),N=(()=>b==="juror"?{className:"col-filter-popover col-filter-popover-portal",contentKey:r,content:e.jsxs(e.Fragment,{children:[e.jsxs("select",{autoFocus:!0,value:r,onChange:a=>{i(a.target.value),J()},children:[e.jsx("option",{value:"ALL",children:"All jurors"}),s.map(a=>e.jsxs("option",{value:a.key,children:[a.name,a.dept?` (${a.dept})`:""]},a.key))]}),r!=="ALL"&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{i("ALL"),J()},children:"Clear"})]})}:b==="dept"?{className:"col-filter-popover col-filter-popover-portal",contentKey:n,content:e.jsxs(e.Fragment,{children:[e.jsxs("select",{autoFocus:!0,value:n,onChange:a=>{o(a.target.value),J()},children:[e.jsx("option",{value:"ALL",children:"All departments"}),A.map(a=>e.jsx("option",{value:a.key,children:a.label},a.key))]}),n!=="ALL"&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{o("ALL"),J()},children:"Clear"})]})}:b==="group"?{className:"col-filter-popover col-filter-popover-portal",contentKey:l,content:e.jsxs(e.Fragment,{children:[e.jsxs("select",{autoFocus:!0,value:l,onChange:a=>{m(a.target.value),J()},children:[e.jsx("option",{value:"ALL",children:"All groups"}),K.map(a=>e.jsx("option",{value:String(a.id),children:a.label},a.id))]}),l!=="ALL"&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{m("ALL"),J()},children:"Clear"})]})}:b==="timestamp"?{className:`col-filter-popover col-filter-popover-portal col-filter-popover-timestamp${I?" is-centered":""}`,contentKey:`${c}|${g}`,mode:I?"center":"anchor",content:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"timestamp-field",children:[e.jsx("label",{children:"From"}),e.jsx("input",{autoFocus:!0,type:"date",value:c,onChange:a=>h(a.target.value)})]}),e.jsxs("div",{className:"timestamp-field",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:g,onChange:a=>M(a.target.value)})]}),I?e.jsxs("div",{className:"timestamp-actions",children:[(c||g)&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{h(""),M("")},children:"Clear"}),e.jsx("button",{className:"timestamp-done-btn",onClick:J,children:"Done"})]}):(c||g)&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{h(""),M("")},children:"Clear"})]})}:b==="status"?{className:"col-filter-popover col-filter-popover-portal col-filter-popover-status",contentKey:Array.from(f).sort().join("|"),content:e.jsxs(e.Fragment,{children:[nn.map(({key:a,label:F})=>e.jsxs("label",{className:"status-option",children:[e.jsx("input",{type:"checkbox",checked:f.has(a),onChange:()=>Q(a)}),F]},a)),f.size>0&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{u(new Set),J()},children:"Clear"})]})}:b==="comments"?{className:"col-filter-popover col-filter-popover-portal",contentKey:y,content:e.jsxs(e.Fragment,{children:[e.jsx("input",{autoFocus:!0,placeholder:"Search commentsâ€¦",value:y,onChange:a=>C(a.target.value)}),y&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{C(""),J()},children:"Clear"})]})}:null)();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-table-toolbar",children:[e.jsxs("span",{className:"filter-count",children:["Showing ",e.jsx("strong",{children:se.length})," row",se.length!==1?"s":""]}),H&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"filters-active-pill",children:["Filters: ",$]}),e.jsx("button",{type:"button",className:"filters-clear-btn",onClick:O,"aria-label":"Clear filters",title:"Clear filters",children:e.jsx(ds,{})})]}),e.jsxs("button",{className:"xlsx-export-btn",onClick:()=>{As(se)},children:[e.jsx(mt,{}),e.jsx("span",{className:"export-label-long",children:"Export Excel"}),e.jsx("span",{className:"export-label-short",children:"Excel"})]})]}),e.jsx(an,{open:!!N,anchorRect:p,onClose:J,className:N==null?void 0:N.className,contentKey:N==null?void 0:N.contentKey,mode:N==null?void 0:N.mode,children:N==null?void 0:N.content}),e.jsx("div",{className:"detail-table-wrap",children:e.jsxs("table",{className:"detail-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{className:"col-sort-label",onClick:()=>ne("juryName"),children:"Juror"}),e.jsx("div",{className:`col-filter-hotspot${r!=="ALL"?" active":""}`,onClick:a=>{a.stopPropagation(),q("juror",a)},title:"Filter by juror",children:e.jsx(de,{})})]})}),e.jsx("th",{style:{position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{className:"col-sort-label",onClick:()=>ne("juryDept"),children:"Department"}),e.jsx("div",{className:`col-filter-hotspot${n!=="ALL"?" active":""}`,onClick:a=>{a.stopPropagation(),q("dept",a)},title:"Filter by department",children:e.jsx(de,{})})]})}),e.jsx("th",{style:{position:"relative",whiteSpace:"nowrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{className:"col-sort-label",onClick:()=>ne("projectId"),children:"Group"}),e.jsx("div",{className:`col-filter-hotspot${l!=="ALL"?" active":""}`,onClick:a=>{a.stopPropagation(),q("group",a)},title:"Filter by group",children:e.jsx(de,{})})]})}),e.jsx("th",{style:{position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{className:"col-sort-label",onClick:()=>ne("tsMs"),children:"Timestamp"}),e.jsx("div",{className:`col-filter-hotspot${c||g?" active":""}`,onClick:a=>{a.stopPropagation(),q("timestamp",a)},title:"Filter by date",children:e.jsx(de,{})})]})}),e.jsx("th",{style:{position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Status"}),e.jsx("div",{className:`col-filter-hotspot${f.size>0?" active":""}`,onClick:a=>{a.stopPropagation(),q("status",a)},title:"Filter by status",children:e.jsx(de,{})})]})}),rn.map(({key:a,label:F})=>e.jsx("th",{style:{cursor:"pointer",whiteSpace:"nowrap"},onClick:()=>ne(a),children:e.jsxs("span",{className:"col-sort-label",children:[F," ",e.jsx("span",{className:"sort-icon",children:le(a)})]})},a)),e.jsx("th",{style:{position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[e.jsx("span",{children:"Comments"}),e.jsx("div",{className:`col-filter-hotspot${y?" active":""}`,onClick:a=>{a.stopPropagation(),q("comments",a)},title:"Filter by comments",children:e.jsx(de,{})})]})})]})}),e.jsxs("tbody",{children:[se.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:11,style:{textAlign:"center",padding:32,color:"#64748b"},children:"No matching rows."})}),se.map((a,F)=>{nt.find(D=>D.id===a.projectId);const w=a.status==="in_progress";return e.jsxs("tr",{className:F%2===1?"row-even":"",children:[e.jsx("td",{className:"cell-juror",children:a.juryName}),e.jsx("td",{className:"cell-dept",style:{fontSize:12,color:"#475569"},children:a.juryDept}),e.jsx("td",{className:"cell-group",style:{whiteSpace:"nowrap"},children:e.jsx("div",{className:"cell-group-wrap",title:`Group ${a.projectId}`,style:{cursor:"default"},children:e.jsxs("strong",{className:"cell-group-title",children:["Group ",a.projectId]})})}),e.jsx("td",{style:{fontSize:12,color:"#475569",whiteSpace:"nowrap"},children:We(a.timestamp)}),e.jsx("td",{children:e.jsx(ke,{status:a.status,editingFlag:a.editingFlag})}),e.jsx("td",{style:{color:w?"#94a3b8":void 0},children:ge(a.technical)}),e.jsx("td",{style:{color:w?"#94a3b8":void 0},children:ge(a.design)}),e.jsx("td",{style:{color:w?"#94a3b8":void 0},children:ge(a.delivery)}),e.jsx("td",{style:{color:w?"#94a3b8":void 0},children:ge(a.teamwork)}),e.jsx("td",{style:{color:w?"#94a3b8":void 0},children:e.jsx("strong",{children:ge(a.total)})}),e.jsx("td",{className:"comment-cell cell-comment",children:a.comments})]},`${rt(a)}-${a.projectId}-${F}`)})]})]})})]})}const it=W.map((t,s)=>typeof t=="string"?{id:s+1,name:t,desc:"",students:[]}:{id:t.id??s+1,name:t.name??`Group ${s+1}`,desc:t.desc??"",students:t.students??[]});function ln({jurorStats:t,onPinReset:s}){const[r,i]=d.useState(""),[n,o]=d.useState(""),[l,m]=d.useState(new Set);d.useEffect(()=>{const c=setTimeout(()=>o(r),200);return()=>clearTimeout(c)},[r]);function f(c){m(h=>{const g=new Set(h);return g.has(c)?g.delete(c):g.add(c),g})}const u=d.useMemo(()=>{const c=n.trim().toLowerCase();return c?t.filter(h=>{var g;return h.jury.toLowerCase().includes(c)||(h.dept||((g=h.latestRow)==null?void 0:g.juryDept)||"").toLowerCase().includes(c)}):t},[t,n]);return e.jsxs("div",{className:"jurors-tab-wrap",children:[e.jsx("div",{className:"juror-filter-bar",children:e.jsxs("div",{className:"juror-search-wrap",children:[e.jsx("input",{className:"juror-search-input",value:r,onChange:c=>i(c.target.value),placeholder:"ðŸ” Search by name or departmentâ€¦"}),r&&e.jsx("button",{className:"juror-search-clear",onClick:()=>i(""),children:"âœ•"})]})}),u.length===0&&e.jsx("div",{className:"empty-msg",children:"No jurors match the current filter."}),e.jsx("div",{className:"jurors-grid jurors-grid-full",children:u.map(c=>{const{key:h,jury:g,rows:M,overall:y,latestRow:C}=c,x=Is(M),L=x===100?"#22c55e":x>66?"#84cc16":x>33?"#eab308":x>0?"#f97316":"#e2e8f0",v=M.some(p=>p.editingFlag==="editing"),k=it.map(p=>{const j=M.find(z=>z.projectId===p.id),I=(j==null?void 0:j.status)==="group_submitted"||(j==null?void 0:j.status)==="all_submitted"?"submitted":(j==null?void 0:j.status)||"not_started";return{id:p.id,status:I}}),b=k.length>0&&k.every(p=>p.status==="submitted"),S=v?"juror-card-editing":y==="all_submitted"?"juror-card-all-submitted":y==="in_progress"?"juror-card-in-progress":"";return e.jsxs("div",{className:`juror-card ${S}`,children:[e.jsxs("div",{className:"juror-card-header",children:[e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{className:"juror-name",style:{wordBreak:"break-word"},children:["ðŸ‘¤ ",g,(C==null?void 0:C.juryDept)&&e.jsxs("span",{className:"juror-dept-inline",children:[" (",C.juryDept,")"]})]}),e.jsx("div",{className:"juror-header-actions",children:v?e.jsx(ke,{status:y,editingFlag:"editing"}):b?e.jsx(ke,{variant:"completed",icon:e.jsx(Re,{}),children:"Completed"}):e.jsx(ke,{status:y})})]}),e.jsxs("div",{className:"juror-meta",children:[(C==null?void 0:C.timestamp)&&e.jsxs("div",{className:"juror-last-submit",children:[e.jsx("span",{className:"juror-last-submit-label",children:"Last activity"}),e.jsx("span",{className:"juror-last-submit-time",children:We(C==null?void 0:C.timestamp)})]}),s&&e.jsx("button",{className:"pin-reset-btn",title:`Reset PIN for ${g}`,onClick:()=>s(g,(C==null?void 0:C.juryDept)||"",(C==null?void 0:C.jurorId)||""),children:"ðŸ”‘ Reset PIN"})]})]}),e.jsxs("div",{className:"juror-progress-wrap",children:[e.jsx("div",{className:"juror-progress-bar-bg",children:e.jsx("div",{className:"juror-progress-bar-fill",style:{width:`${x}%`,background:L}})}),e.jsxs("span",{className:"juror-progress-label",children:[x,"%"]})]}),e.jsx("div",{className:"juror-projects",children:M.slice().sort((p,j)=>p.projectId-j.projectId).map(p=>{var $,H;const j=it.find(O=>O.id===p.projectId),I=`${h}-${p.projectId}`,z=l.has(I),K=`juror-group-panel-${I}`,A=!!(j!=null&&j.desc)||(($=j==null?void 0:j.students)==null?void 0:$.length)>0;return e.jsxs("div",{className:"juror-row-wrap",children:[e.jsxs("div",{className:"juror-row group-accordion-header",role:"button",tabIndex:A?0:-1,"aria-expanded":z,"aria-controls":K,onClick:()=>{A&&f(I)},onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&A&&(O.preventDefault(),f(I))},style:{cursor:A?"pointer":"default"},children:[e.jsx("div",{className:"juror-row-left",children:e.jsxs("div",{className:"juror-row-header-line",children:[e.jsx("span",{className:"juror-row-name",children:(j==null?void 0:j.name)||`Group ${p.projectId}`}),A&&e.jsx("span",{className:`group-accordion-chevron${z?" open":""}`,children:"â–¾"})]})}),e.jsxs("div",{className:"juror-row-right",children:[p.timestamp&&e.jsx("span",{className:"juror-row-ts",children:We(p.timestamp)}),e.jsx(ke,{status:p.status,editingFlag:p.editingFlag}),(p.status==="all_submitted"||p.status==="group_submitted")&&e.jsx("span",{className:"juror-score",title:"/ 100","aria-label":`${p.total} / 100`,children:p.total})]})]}),e.jsx("div",{id:K,className:`group-accordion-panel${z?" open":""}`,children:e.jsxs("div",{className:"group-accordion-panel-inner juror-accordion-inner",children:[(j==null?void 0:j.desc)&&e.jsx("span",{className:"juror-row-desc",children:j.desc}),((H=j==null?void 0:j.students)==null?void 0:H.length)>0&&e.jsxs("span",{className:"juror-row-students",children:["ðŸ‘¥ ",j.students.join(" Â· ")]})]})})]},I)})})]},h)})})]})}const cn=t=>t?t.status==="all_submitted"?{background:"#dcfce7",color:"#166534",fontWeight:700}:t.status==="group_submitted"?{background:"#dcfce7",color:"#166534",fontWeight:700}:t.status==="in_progress"?{background:"#fef9c3",color:"#92400e"}:{background:"#f8fafc",color:"#94a3b8"}:{background:"#f8fafc",color:"#94a3b8"},dn=t=>t?t.status==="all_submitted"||t.status==="group_submitted"?t.total:t.status==="in_progress"?"":"â€”":"â€”";function un({data:t,jurors:s,groups:r}){const[i,n]=d.useState(null),[o,l]=d.useState("desc"),[m,f]=d.useState(""),[u,c]=d.useState(null),h=d.useMemo(()=>{const b={};return t.forEach(S=>{const p=S.jurorId?S.jurorId:`${(S.juryName||"").trim().toLowerCase()}__${(S.juryDept||"").trim().toLowerCase()}`;b[p]||(b[p]={}),b[p][S.projectId]={total:S.total,status:S.status,editingFlag:S.editingFlag}}),b},[t]);function g(b){i!==b?(n(b),l("desc")):o==="desc"?l("asc"):(n(null),l("desc"))}const M=b=>i!==b?e.jsx(ht,{}):o==="desc"?e.jsx(xt,{}):e.jsx(pt,{});function y(){f(""),c(null)}const C=d.useMemo(()=>{let b=s.slice();if(m){const S=m.toLowerCase();b=b.filter(p=>p.name.toLowerCase().includes(S))}return i!==null&&(b=[...b].sort((S,p)=>{var $,H;const j=($=h[S.key])==null?void 0:$[i],I=(H=h[p.key])==null?void 0:H[i],z=(j==null?void 0:j.status)==="all_submitted"?Number(j.total):null,K=(I==null?void 0:I.status)==="all_submitted"?Number(I.total):null;if(z===null&&K===null)return Ne(S.name,p.name);if(z===null)return 1;if(K===null)return-1;const A=o==="desc"?K-z:z-K;return A!==0?A:Ne(S.name,p.name)})),b},[s,m,i,o,h]),x=b=>{const S=r.map(p=>{var z;const j=(z=h[b])==null?void 0:z[p.id];return{status:(j==null?void 0:j.status)==="group_submitted"||(j==null?void 0:j.status)==="all_submitted"?"submitted":(j==null?void 0:j.status)||"not_started",editing:(j==null?void 0:j.editingFlag)==="editing"}});return S.every(p=>p.status==="not_started")?"not_started":S.some(p=>p.editing)?"editing":S.every(p=>p.status==="submitted")?"completed":S.some(p=>p.status==="in_progress")?"in_progress":S.some(p=>p.status==="submitted")?"submitted":"not_started"},L={completed:"Completed",submitted:"Submitted",in_progress:"In Progress",editing:"Editing",not_started:"Not Started"},v={completed:e.jsx(Re,{}),submitted:e.jsx(Be,{}),in_progress:e.jsx(Me,{}),editing:e.jsx(Ee,{}),not_started:e.jsx(rs,{})},k=d.useMemo(()=>r.map(b=>{const S=C.map(p=>{var j;return(j=h[p.key])==null?void 0:j[b.id]}).filter(p=>(p==null?void 0:p.status)==="all_submitted").map(p=>p.total);return S.length?(S.reduce((p,j)=>p+j,0)/S.length).toFixed(2):null}),[C,r,h]);return s.length?e.jsxs("div",{className:"matrix-wrap",children:[(m||C.length<s.length)&&e.jsxs("div",{className:"matrix-controls",children:[m&&e.jsx("button",{className:"matrix-clear-filters",onClick:y,children:"âœ• Clear Filters"}),C.length<s.length&&e.jsxs("span",{style:{fontSize:12,color:"#3b82f6",fontWeight:600},children:["Showing ",C.length,"/",s.length," jurors"]})]}),e.jsxs("p",{className:"matrix-info-note",children:[e.jsx(ft,{})," Averages include only ",e.jsx("strong",{children:"completed"})," submissions."]}),e.jsx("div",{className:"matrix-subtitle",children:e.jsxs("span",{className:"matrix-legend-group matrix-icon-legend",children:[e.jsxs("span",{className:"matrix-icon-legend-item",children:[e.jsx("span",{className:"matrix-status-icon completed",children:e.jsx(Re,{})}),"Completed"]}),e.jsxs("span",{className:"matrix-icon-legend-item",children:[e.jsx("span",{className:"matrix-legend-icons",children:e.jsx("span",{className:"matrix-legend-dot submitted-dot"})}),"Submitted"]}),e.jsxs("span",{className:"matrix-icon-legend-item",children:[e.jsx("span",{className:"matrix-status-icon editing",children:e.jsx(Ee,{})}),"Editing"]}),e.jsxs("span",{className:"matrix-icon-legend-item",children:[e.jsxs("span",{className:"matrix-legend-icons",children:[e.jsx("span",{className:"matrix-legend-dot progress-dot"}),e.jsx("span",{className:"matrix-status-icon in_progress",children:e.jsx(Me,{})})]}),"In Progress"]}),e.jsxs("span",{className:"matrix-icon-legend-item",children:[e.jsx("span",{className:"matrix-legend-dot empty-dot"}),"Not Started"]})]})}),u!==null&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:50},onClick:()=>c(null)}),e.jsx("div",{className:"matrix-scroll",children:e.jsxs("table",{className:"matrix-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"matrix-corner",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:["Juror / Group",e.jsx("button",{className:`col-filter-hotspot${m?" active":""}`,onClick:b=>{b.stopPropagation(),c(S=>S==="juror"?null:"juror")},title:"Filter jurors",children:e.jsx(de,{})})]}),u==="juror"&&e.jsxs("div",{className:"col-filter-popover",onClick:b=>b.stopPropagation(),children:[e.jsx("input",{autoFocus:!0,placeholder:"Filter juror nameâ€¦",value:m,onChange:b=>f(b.target.value)}),m&&e.jsx("button",{className:"col-filter-clear",onClick:()=>{f(""),c(null)},children:"Clear"})]})]}),r.map(b=>{const S=i===b.id;return e.jsx("th",{children:e.jsxs("button",{className:`matrix-col-sort${S?" active":""}`,onClick:()=>g(b.id),title:`Sort by ${b.label}`,children:[e.jsx("strong",{children:b.label}),e.jsx("span",{className:"sort-icon",children:M(b.id)})]})},b.id)})]})}),e.jsx("tbody",{children:C.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"matrix-juror",children:(()=>{const S=x(b.key),p=b.dept?`${b.name} (${b.dept})`:b.name;return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`matrix-status-icon ${S}`,title:L[S],"aria-hidden":"true",children:v[S]}),e.jsxs("span",{className:"matrix-juror-name",title:p,children:[b.name,b.dept&&e.jsxs("span",{className:"matrix-juror-dept",children:[" (",b.dept,")"]})]})]})})()}),r.map(S=>{var j;const p=((j=h[b.key])==null?void 0:j[S.id])??null;return e.jsx("td",{style:cn(p),children:dn(p)},S.id)})]},b.key))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"matrix-avg-row",children:[e.jsx("td",{className:"matrix-juror matrix-avg-label",children:"Average"}),k.map((b,S)=>e.jsx("td",{className:"matrix-avg-cell",children:b!==null?b:"â€”"},r[S].id))]})})]})})]}):e.jsx("div",{className:"empty-msg",children:"No data yet."})}const ze=W.map((t,s)=>typeof t=="string"?{id:s+1,name:t,desc:"",students:[]}:{id:t.id??s+1,name:t.name??`Group ${s+1}`,desc:t.desc??"",students:t.students??[]}),mn=V.map(t=>({id:t.id,label:t.label,shortLabel:t.shortLabel,max:t.max})),$e=ze.length;function ve(t){if(t===""||t===null||t===void 0||typeof t=="string"&&t.trim()==="")return"";const s=Number(String(t??"").trim().replace(/^"+|"+$/g,"").replace(",","."));return Number.isFinite(s)?s:""}const hn=[{id:"summary",label:"Summary",icon:is},{id:"dashboard",label:"Dashboard",icon:as},{id:"detail",label:"Details",icon:os},{id:"jurors",label:"Jurors",icon:Zt},{id:"matrix",label:"Matrix",icon:ls}];function pn({metrics:t,id:s}){const{completedJurors:r,totalJurors:i,completedEvaluations:n,totalEvaluations:o,inProgressJurors:l,editingJurors:m}=t;return e.jsxs("div",{id:s,className:"results-status-bar",role:"group","aria-label":"Results status metrics",children:[e.jsxs("span",{className:"status-chip status-jurors",children:[e.jsx(es,{}),e.jsx("span",{className:"status-label",children:"Jurors"}),e.jsx("span",{className:"status-value",children:i}),e.jsx("span",{className:"status-sep","aria-hidden":"true",children:"Â·"}),e.jsxs("span",{className:"status-breakdown",children:[e.jsxs("span",{className:"status-breakdown-item",children:[e.jsx(ts,{}),r]}),e.jsx("span",{className:"status-sep","aria-hidden":"true",children:"Â·"}),e.jsxs("span",{className:"status-breakdown-item",children:[e.jsx(Me,{}),l]}),e.jsx("span",{className:"status-sep","aria-hidden":"true",children:"Â·"}),e.jsxs("span",{className:"status-breakdown-item",children:[e.jsx(Ee,{}),m]})]})]}),e.jsxs("span",{className:"status-chip status-evaluated",children:[e.jsx(ns,{}),e.jsx("span",{className:"status-label",children:"Evaluated"}),e.jsxs("span",{className:"status-value",children:[n,"/",o]})]})]})}function xn({adminPass:t,onBack:s,onAuthError:r,onInitialLoadDone:i}){const[n,o]=d.useState([]),[l,m]=d.useState(!0),[f,u]=d.useState(""),[c,h]=d.useState(""),[g,M]=d.useState(!0),[y,C]=d.useState("summary"),[x,L]=d.useState(null),[v,k]=d.useState(null),[b,S]=d.useState(""),p=d.useRef(!1),j=d.useRef(t);d.useEffect(()=>{j.current=t},[t]);const I=async()=>{m(!0),u("");try{const N=j.current||sessionStorage.getItem("ee492_admin_pass")||"";if(!N){o([]),h("Enter the admin password to load results.");return}const a=await pe({action:"export",pass:N});if((a==null?void 0:a.status)==="unauthorized"){if(o([]),r){r("Invalid password");return}h("Incorrect password.");return}if((a==null?void 0:a.status)!=="ok"||!Array.isArray(a==null?void 0:a.rows))throw new Error("Unexpected response format.");try{sessionStorage.setItem("ee492_admin_pass",N)}catch{}const F=a.rows.map(w=>({juryName:String(w["Juror Name"]??w["Your Name"]??""),juryDept:String(w["Department / Institution"]??w.Department??""),timestamp:w.Timestamp||"",tsMs:Ie(w.Timestamp||""),projectId:Ls(w["Group No"]),projectName:String(w["Group Name"]??""),jurorId:String(w["Juror ID"]??""),technical:ve(w["Technical (30)"]),design:ve(w["Written (30)"]),delivery:ve(w["Oral (30)"]),teamwork:ve(w["Teamwork (10)"]),total:ve(w["Total (100)"]),comments:w.Comments||"",status:String(w.Status??"all_submitted"),editingFlag:String(w.EditingFlag??"")}));o(Ps(F)),L(new Date),h(""),p.current||(p.current=!0,i==null||i())}catch(N){if(r){r("Connection error â€” try again.");return}u("Could not load data: "+N.message),o([])}finally{m(!1)}};d.useEffect(()=>{I()},[]),d.useEffect(()=>{},[]),d.useEffect(()=>(v?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[v]);const z=async(N,a,F)=>{k({juryName:N,juryDept:a}),S("loading");try{const w=j.current||sessionStorage.getItem("ee492_admin_pass")||"",D=await pe({action:"resetPin",jurorId:F.trim(),pass:w});S(D.status==="ok"?"ok":"error")}catch{S("error")}setTimeout(()=>{k(null),S("")},3e3)},K=N=>N.jurorId?N.jurorId:`${(N.juryName||"").trim().toLowerCase()}__${(N.juryDept||"").trim().toLowerCase()}`,A=d.useMemo(()=>{const N=new Map;return n.forEach(a=>{if(!a.juryName)return;const F=K(a);N.has(F)||N.set(F,{key:F,name:a.juryName.trim(),dept:a.juryDept.trim(),jurorId:a.jurorId})}),[...N.values()].sort((a,F)=>Ne(a.name,F.name))},[n]),$=d.useMemo(()=>ze.map(N=>({id:N.id,label:`Group ${N.id}`,desc:N.desc||""})).sort((N,a)=>N.id-a.id),[]),H=d.useMemo(()=>{const N=new Map;return A.forEach(({key:a,dept:F})=>N.set(a,F)),N},[A]),O=d.useMemo(()=>{const N=new Map;return A.forEach(({key:a,name:F})=>N.set(a,{bg:Ms(F),dot:Es(F)})),N},[A]),Q=d.useMemo(()=>n.filter(N=>N.status==="all_submitted"),[n]),J=d.useMemo(()=>n.filter(N=>N.status==="group_submitted"||N.status==="all_submitted"),[n]),q=d.useMemo(()=>ze.map(N=>{const a=Q.filter(D=>D.projectId===N.id);if(!a.length)return{id:N.id,name:N.name,desc:N.desc,students:N.students,count:0,avg:{},totalAvg:0,totalMin:0,totalMax:0};const F={};mn.forEach(D=>{F[D.id]=a.reduce((G,te)=>G+(te[D.id]||0),0)/a.length});const w=a.map(D=>D.total);return{id:N.id,name:N.name,desc:N.desc,students:N.students,count:a.length,avg:F,totalAvg:w.reduce((D,G)=>D+G,0)/w.length,totalMin:Math.min(...w),totalMax:Math.max(...w)}}),[Q]),U=d.useMemo(()=>q.map(N=>({...N,name:`Group ${N.id}`})),[q]),se=d.useMemo(()=>[...q].sort((N,a)=>a.totalAvg-N.totalAvg),[q]),ne=d.useMemo(()=>A.map(({key:N,name:a,dept:F,jurorId:w})=>{const D=n.filter(ee=>K(ee)===N),G=D.filter(ee=>ee.status==="group_submitted"||ee.status==="all_submitted"),te=D.filter(ee=>ee.status==="all_submitted"),Z=D.filter(ee=>ee.status==="in_progress"),ae=D.reduce((ee,we)=>we.tsMs>ee?we.tsMs:ee,0),Y=D.find(ee=>ee.tsMs===ae)||D[0],re=te.length===$e?"all_submitted":G.length>0||Z.length>0?"in_progress":"not_started";return{key:N,jury:a,dept:F,jurorId:w,rows:D,submitted:G,completed:G,finalSubmitted:te,inProgress:Z,latestTs:ae,latestRow:Y,overall:re}}),[A,n]);n.filter(N=>N.status==="in_progress").length,ne.filter(N=>N.rows.some(a=>a.editingFlag==="editing")).length;const le=d.useMemo(()=>{const N=A.length,a=J.length,F=N*$e,w=new Map;n.forEach(Y=>{if(Y.status!=="all_submitted")return;const re=K(Y);w.has(re)||w.set(re,new Set),w.get(re).add(Y.projectId)});const D=A.filter(Y=>{var re;return(((re=w.get(Y.key))==null?void 0:re.size)||0)>=$e}).length,G=new Set(n.filter(Y=>Y.status==="editing"||Y.editingFlag==="editing").map(Y=>K(Y))),Z=new Set(n.filter(Y=>Y.status==="in_progress").map(Y=>K(Y)).filter(Y=>!G.has(Y))).size,ae=G.size;return{completedJurors:D,totalJurors:N,completedEvaluations:a,totalEvaluations:F,inProgressJurors:Z,editingJurors:ae}},[n,Q,J,A,K]);return e.jsxs("div",{className:"admin-screen",children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("div",{className:"form-header-main",children:[e.jsx("button",{className:"back-btn",onClick:s,"aria-label":"Back to home",children:e.jsx(Fe,{})}),e.jsx("div",{children:e.jsxs("div",{className:"results-title-row",children:[e.jsx("h2",{children:"Results Panel"}),e.jsx("button",{className:"results-toggle",type:"button","aria-label":g?"Hide status metrics":"Show status metrics","aria-expanded":g,"aria-controls":"results-status-bar",onClick:()=>M(N=>!N),children:e.jsx("span",{className:`results-toggle-icon${g?" open":""}`,"aria-hidden":"true",children:"â–¾"})})]})}),e.jsxs("div",{className:"header-actions",children:[x&&e.jsxs("span",{className:"last-updated",children:[e.jsx(ss,{}),x.toLocaleString("tr-TR",{timeZone:"Europe/Istanbul",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(","," Â·")]}),e.jsx("button",{className:"refresh-btn",onClick:I,"aria-label":"Refresh",title:"Refresh",children:e.jsx(us,{})})]})]}),g&&e.jsx(pn,{id:"results-status-bar",metrics:le}),e.jsxs("div",{className:"tab-bar-wrap",children:[e.jsx("div",{className:"tab-bar",children:hn.map(N=>e.jsxs("button",{className:`tab ${y===N.id?"active":""}`,onClick:()=>C(N.id),children:[e.jsx(N.icon,{}),N.label]},N.id))}),e.jsx("span",{className:"tab-scroll-hint","aria-hidden":"true",children:e.jsx(jt,{})})]})]}),l&&e.jsx("div",{className:"loading",children:"Loading dataâ€¦"}),f&&e.jsx("div",{className:"error-msg",children:f}),c&&e.jsx("div",{className:"error-msg",children:c}),v&&e.jsx("div",{className:"pin-reset-modal-overlay",children:e.jsxs("div",{className:`pin-reset-modal-card ${b}`,children:[b==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pin-reset-modal-icon",children:"ðŸ”‘"}),e.jsxs("div",{className:"pin-reset-modal-msg",children:["Resetting PIN for ",e.jsx("strong",{children:v.juryName}),"â€¦"]})]}),b==="ok"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pin-reset-modal-icon ok",children:"âœ…"}),e.jsxs("div",{className:"pin-reset-modal-msg",children:["PIN reset. ",e.jsx("strong",{children:v.juryName})," will receive a new PIN on next login."]})]}),b==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pin-reset-modal-icon error",children:"âŒ"}),e.jsxs("div",{className:"pin-reset-modal-msg",children:["Could not reset PIN for ",e.jsx("strong",{children:v.juryName}),"."]})]})]})}),!l&&!f&&!c&&e.jsxs("div",{className:"admin-body",children:[y==="summary"&&e.jsx(Ws,{ranked:se,submittedData:Q}),y==="dashboard"&&e.jsx(sn,{dashboardStats:U,submittedData:Q,lastRefresh:x,loading:l,error:f}),y==="detail"&&e.jsx(on,{data:n,jurors:A,jurorColorMap:O}),y==="jurors"&&e.jsx(ln,{jurorStats:ne,jurors:A,onPinReset:z}),y==="matrix"&&e.jsx(un,{data:n,jurors:A,groups:$,jurorDeptMap:H})]})]})}const fn="/senior-design-jury/assets/tedu-logo-c1977d2a.png";function jn(){const[t,s]=d.useState("home"),r=d.useRef(""),[i,n]=d.useState(!1),[o,l]=d.useState(!1),[m,f]=d.useState(""),[u,c]=d.useState("");function h(){const M=m.trim();if(!M){c("Please enter the admin password.");return}r.current=M,f(""),c(""),l(!0),n(!0)}function g(M){n(!1),l(!1),r.current="",c(M||"Authentication failed.")}return t==="jury"?e.jsx(ks,{onBack:()=>s("home")}):t==="admin"?i?e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"admin-checking-overlay",children:e.jsxs("div",{className:"admin-checking-card",children:[e.jsx("div",{className:"admin-checking-icon",children:"ðŸ”„"}),e.jsx("div",{className:"admin-checking-msg",children:"Checkingâ€¦"})]})}),e.jsx(xn,{adminPass:r.current,onAuthError:g,onInitialLoadDone:()=>l(!1),onBack:()=>{s("home"),n(!1),l(!1),c(""),r.current=""}})]}):e.jsx("div",{className:"lock-screen",children:e.jsxs("div",{className:"lock-card",children:[e.jsx("div",{className:"lock-icon",children:"ðŸ”’"}),e.jsx("h2",{children:"Results Panel"}),e.jsx("p",{children:"Enter the admin password to view results"}),u&&e.jsx("div",{className:"login-error",children:u}),e.jsx("input",{type:"password",placeholder:"Password",value:m,onChange:M=>{f(M.target.value),u&&c("")},onKeyDown:M=>{M.key==="Enter"&&h()},autoFocus:!0}),e.jsx("button",{className:"btn-primary",onClick:h,disabled:o,children:"Login"}),e.jsx("button",{className:"btn-ghost",onClick:()=>{s("home"),c("")},children:"â† Back"})]})}):e.jsxs("div",{className:"home",children:[e.jsx("div",{className:"home-bg"}),e.jsxs("div",{className:"home-card",children:[e.jsx("div",{className:"home-logo-wrap",children:e.jsx("img",{className:"home-logo",src:fn,alt:"TED University",loading:"eager"})}),e.jsxs("h1",{children:["Senior Project",e.jsx("br",{}),"Jury Portal"]}),e.jsxs("p",{className:"home-sub",children:["TED University ",e.jsx("br",{}),"Dept. of Electrical & Electronics Engineering"]}),e.jsxs("div",{className:"home-buttons",children:[e.jsxs("button",{className:"btn-primary big",onClick:()=>s("jury"),children:[e.jsx("span",{children:"ðŸ“‹"})," Evaluation Form"]}),e.jsxs("button",{className:"btn-outline big",onClick:()=>s("admin"),children:[e.jsx("span",{children:"ðŸ“Š"})," View Results"]})]}),e.jsxs("p",{className:"home-hint",children:[e.jsx("span",{className:"home-hint-ico",children:"â„¹ï¸"}),e.jsxs("span",{children:["Use the ",e.jsx("strong",{children:"Evaluation Form"})," to score each project group."]})]}),e.jsxs("div",{className:"home-footer",children:["Â© 2026 Â· Developed by"," ",e.jsx("a",{className:"home-footer-link",href:"https://huguryildiz.com",target:"_blank",rel:"noopener noreferrer",children:"Huseyin Ugur Yildiz"})]})]})]})}Te.createRoot(document.getElementById("root")).render(e.jsx(Tt.StrictMode,{children:e.jsx(jn,{})}));
